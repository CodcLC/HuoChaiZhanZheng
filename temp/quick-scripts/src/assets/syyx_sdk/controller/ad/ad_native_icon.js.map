{"version":3,"sources":["assets\\syyx_sdk\\controller\\ad\\ad_native_icon.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { native_ad_data } from \"../../model/model\";\r\nimport { e_ad_native_state, e_ad_native_type } from \"../../configs/syyx_sdk_enum\";\r\nimport { syyx_manager } from \"../syyx_manager\";\r\nimport { syyx_const } from \"../../configs/syyx_sdk_config\";\r\nimport { syyx_adv_manager } from \"./syyx_adv_manager\";\r\nimport { syyx_sdk_utils } from \"../../utils/syyx_sdk_utils\";\r\nimport { ad_banner } from \"./ad_banner\";\r\n\r\nexport class ad_native_icon {\r\n    /**\r\n      * 原生数据\r\n      */\r\n    static _native_data_list = []\r\n\r\n    /**\r\n    * 远端运营配置\r\n    */\r\n    static _business_config_data = {};\r\n\r\n    /**\r\n     * 配置表广告id\r\n     */\r\n    static _ad_pos_id\r\n\r\n    /**\r\n     * 创建广告时传入的参数\r\n     */\r\n    static _ad_param\r\n\r\n    /**\r\n     * banner自动刷新时间\r\n     */\r\n    static auto_update_cd = [20, 20]\r\n\r\n    /**\r\n     * 刷新定时器是否开启\r\n     */\r\n    static is_run_timer = false\r\n\r\n    /**\r\n     * 原生icon 父节点\r\n     */\r\n    static icon_parent\r\n\r\n    /**\r\n     * 当前是否需要展示banner\r\n     */\r\n    static need_show = true\r\n\r\n    /**\r\n     * 自动刷新定时器\r\n     */\r\n    static run_timer() {\r\n        if (!this.is_run_timer && this.is_oppo_vivo()) { // 一开始is_run_timerfalse\r\n            this.is_run_timer = true\r\n            this.timer_func()\r\n        }\r\n    }\r\n\r\n    static timer_id\r\n    static timer_func() {\r\n        let self = this\r\n        this._business_config_data = syyx_manager.get_business_config()\r\n        if (this._business_config_data && this._business_config_data[\"native_icon_cool_time\"]) {\r\n            this.auto_update_cd = this._business_config_data[\"native_icon_cool_time\"].value\r\n        }\r\n        this.load_native_icon()\r\n        let cd = syyx_sdk_utils.get_random_number(this.auto_update_cd) // 20秒\r\n\r\n        this.timer_id && clearTimeout(this.timer_id)\r\n        this.timer_id = setTimeout(() => {\r\n            self.timer_func()\r\n        }, cd * 1000)\r\n    }\r\n\r\n    static report_ad_click(ad_pos_id: string, native_data?) {\r\n        if (this._ad_pos_id != ad_pos_id) {\r\n            return\r\n        }\r\n        console.log(\"igc ----- has in native icon 's report click \")\r\n\r\n        //上报的是原生banner点击  隐藏原生bannerUi 重新请求新的原生banner数据\r\n        this._business_config_data = syyx_manager.get_business_config()\r\n        if (this._business_config_data && this._business_config_data[\"native_icon_report_click_update_switch\"]) {\r\n            if (this._business_config_data[\"native_icon_report_click_update_switch\"].value[0] == 1) { // 原生icon点击上报后立即刷新\r\n                this.destroy_timer()\r\n                this.icon_parent && this.show_native_icon(this.icon_parent, this._ad_param.ad_type, this._ad_param.ad_pos_id, this._ad_param.onLoad,\r\n                    this._ad_param.onShow, this._ad_param.onClose, this._ad_param.onError)\r\n            }\r\n        }\r\n    }\r\n\r\n    static report_ad_show(ad_pos_id: string, native_data) {\r\n        if (this._ad_pos_id == ad_pos_id) {\r\n        }\r\n    }\r\n\r\n    static show_native_icon(parent, ad_type?: igc.e_ad_type, ad_pos_id?: string, onLoad?: Function, onShow?: Function, onClose?: Function, onError?: Function) {\r\n        this._ad_pos_id = ad_pos_id\r\n        this._ad_param = {\r\n            ad_type: ad_type,\r\n            ad_pos_id: ad_pos_id,\r\n            onLoad: onLoad,\r\n            onShow: onShow,\r\n            onClose: onClose,\r\n            onError: onError,\r\n        }\r\n\r\n        this.need_show = true\r\n        this.icon_parent = parent\r\n\r\n        let ad_id = syyx_adv_manager.get_channel_ad_id(ad_pos_id)\r\n        if (!ad_id) {\r\n            return\r\n        }\r\n        //原生icon远端配置开关是否开启\r\n        this._business_config_data = syyx_manager.get_business_config()\r\n        if (this._business_config_data && this._business_config_data[\"native_icon_switch\"]) {\r\n            if (this._business_config_data[\"native_icon_switch\"].value[0] == 1) {\r\n                this.run_timer()\r\n            } else {\r\n                console.log(\"sdk----- config - native icon is close\")\r\n            }\r\n        }\r\n    }\r\n\r\n    static hide_native_icon() {\r\n        this.need_show = false\r\n        this.icon_parent = undefined\r\n        this.hide_native_icon_ui()\r\n        this.destroy_timer()\r\n    }\r\n\r\n    static destroy_timer() {\r\n        this.is_run_timer = false\r\n        //销毁定时器\r\n        this.timer_id && clearTimeout(this.timer_id)\r\n        this.timer_id = undefined\r\n    }\r\n\r\n    /**\r\n    * 加载原生插屏\r\n    * @param call_back 加载数据成功回调\r\n    */\r\n    static load_native_icon(call_back?) {\r\n\r\n        let self = this\r\n\r\n        if (!ad_banner.can_show_first) {\r\n            console.log(\"igc----- is in oppo first ad cd\")\r\n            return\r\n        }\r\n\r\n        //当前不需要展示任何banner\r\n        if (!this.need_show) {\r\n            this.hide_native_icon_ui()\r\n            return\r\n        }\r\n\r\n        let native_data = this.get_native_data()\r\n\r\n        //上一个加载的原生banner没有展示过\r\n        if (native_data && native_data.state == e_ad_native_state.need_show) {\r\n            this.show_native_icon_ui()\r\n            return\r\n        }\r\n\r\n        //web渠道  返回假数据\r\n        if (syyx_const.syyx_sdk_channel === igc.e_channel_type.web) {\r\n            let data = new native_ad_data()\r\n            data.id = igc.utils_manager.get_random_name()\r\n            data.adPosId = this._ad_pos_id\r\n            data.adId = syyx_sdk_utils.get_random_number([100, 200])\r\n            data.adUnitId = syyx_sdk_utils.get_random_number([0, 100000])\r\n            data.imgUrlList = \"https://static-cdn.llewan.com/h5/ddsdk/plugin/share_img.jpg\"\r\n            data.title = \"原生icon标题\" + syyx_sdk_utils.get_random_number([100, 200])\r\n            data.desc = \"原生icon描述\" + syyx_sdk_utils.get_random_number([100, 200])\r\n            data.state = e_ad_native_state.need_show\r\n            data.native_type = e_ad_native_type.native_icon\r\n            this.add_native_data(data)\r\n            this._ad_param.onLoad && this._ad_param.onLoad({}, data)\r\n            this.show_native_icon_ui()\r\n            call_back && call_back()\r\n            return\r\n        }\r\n\r\n        syyx_manager.create_ad(igc.e_ad_type.native, this._ad_pos_id,\r\n            function on_load(param, ad_data_list) {\r\n                console.log(\"igc-----syyx_adv_manager-------load_native_icon on_load\", ad_data_list)\r\n                //返回数据异常\r\n                if (ad_data_list == undefined || !ad_data_list[0]) {\r\n\r\n                } else {\r\n                    let length = 0\r\n                    if (syyx_const.syyx_sdk_channel === igc.e_channel_type.vivo_qg) {\r\n                        //vivo渠道只取最后一个位置\r\n                        length = ad_data_list.length - 1\r\n                    }\r\n\r\n                    let imgUrlList\r\n                    if (syyx_const.syyx_sdk_channel === igc.e_channel_type.oppo_qg) {\r\n                        imgUrlList = syyx_sdk_utils.format_remote_texture_url(ad_data_list[length].iconUrlList[0])\r\n                    } else {\r\n                        imgUrlList = syyx_sdk_utils.format_remote_texture_url(ad_data_list[length].imgUrlList[0])\r\n                    }\r\n\r\n                    let data = new native_ad_data()\r\n                    data.id = igc.utils_manager.get_random_name()\r\n                    data.adPosId = self._ad_pos_id\r\n                    data.adId = syyx_adv_manager.get_channel_ad_id(self._ad_pos_id)\r\n                    data.adUnitId = ad_data_list[length].adUnitId\r\n                    data.imgUrlList = imgUrlList\r\n                    data.title = ad_data_list[length].title\r\n                    data.desc = ad_data_list[length].desc\r\n                    data.state = e_ad_native_state.need_show\r\n                    data.native_type = e_ad_native_type.native_icon\r\n                    self.add_native_data(data) // 存好数据\r\n                    self._ad_param.onLoad && self._ad_param.onLoad({}, data)\r\n                    self.show_native_icon_ui() // 展示数据\r\n                }\r\n            },\r\n            function on_show() {\r\n            },\r\n            function on_close(param, res) {\r\n            },\r\n            function on_error(param, err) {\r\n                console.error(\"igc-----syyx_adv_manager-------load_native_icon onError\", err)\r\n\r\n                //原生icon报错就用之前的老数据\r\n                let native_data = self.get_native_data()\r\n                if (native_data) {\r\n                    self.show_native_icon_ui()\r\n                }\r\n\r\n                self._ad_param.onError && self._ad_param.onError()\r\n            }\r\n        )\r\n    }\r\n\r\n    /**\r\n    * 展示原生IconUi\r\n    */\r\n    static show_native_icon_ui() {\r\n        let self = this\r\n        self.hide_native_icon_ui()\r\n        if (!this.need_show) {\r\n            console.log(\"igc----- the current interface doesn't need to show native icon so that do not refresh native data\")\r\n            return\r\n        }\r\n\r\n        if (!this.icon_parent) {\r\n            console.log(\"igc----- the native icon's parent node is not exist\")\r\n            return\r\n        }\r\n\r\n        if (this.is_oppo_vivo()) {\r\n            let native_data = this.get_native_data()\r\n            //展示原生IconUI\r\n            if (this.need_show && native_data) {\r\n                syyx_manager.create_native_icon(function (view) {\r\n                    view.show && view.show(self.icon_parent, native_data)\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 隐藏原生IconUi\r\n     */\r\n    static hide_native_icon_ui() {\r\n        if (this.is_oppo_vivo()) {\r\n            //隐藏原生iconUI\r\n            syyx_manager.create_native_icon(function (view) {\r\n                view.hide && view.hide()\r\n            })\r\n        }\r\n    }\r\n\r\n    static is_oppo_vivo() {\r\n        let is_oppo = syyx_const.syyx_sdk_channel === igc.e_channel_type.oppo_qg\r\n            || syyx_const.syyx_sdk_channel === igc.e_channel_type.vivo_qg\r\n            || syyx_const.syyx_sdk_channel === igc.e_channel_type.web\r\n\r\n        return is_oppo\r\n    }\r\n\r\n    /**\r\n     * 获取最新的原生Banner数据\r\n     */\r\n    static get_native_data() {\r\n        //是否启动OPPO新规\r\n        if (syyx_adv_manager.check_is_open_oppo_rule()) { // ov为ture\r\n            if (syyx_adv_manager.check_native_data_list_is_reprot(this._native_data_list)) {\r\n                //全部数据都上报曝光过了\r\n                console.log(\"igc----- ad_native_icon use old load native data\")\r\n                return syyx_adv_manager.get_min_order_native_data(this._native_data_list)\r\n            } else {\r\n                //有数据没有上报过曝光  用最新数据\r\n                return syyx_adv_manager.get_latest_native_data(this._native_data_list)\r\n            }\r\n        } else {\r\n            return this._native_data_list[0]\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 储存原生数据\r\n     * @param native_data 原生数据\r\n     */\r\n    static add_native_data(native_data) {\r\n        if (syyx_adv_manager.check_is_open_oppo_rule()) {\r\n            for (let i in this._native_data_list) {\r\n                if (this._native_data_list[i].adUnitId == native_data.adUnitId) {\r\n                    return\r\n                }\r\n            }\r\n            let length = syyx_adv_manager.get_oppo_native_cache_max_length() // 20\r\n            //判断缓存数组长度是否超标\r\n            if (this._native_data_list.length >= length) {\r\n                this._native_data_list.splice(0, 1)\r\n            }\r\n            this._native_data_list.push(native_data)\r\n        } else {\r\n            this._native_data_list[0] = native_data\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}