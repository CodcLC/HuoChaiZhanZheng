{"version":3,"sources":["assets\\syyx_sdk\\syyx_ui\\ad\\syyx_ui_interstitial.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { syyx_const } from \"../../configs/syyx_sdk_config\";\r\nimport { e_ad_id } from \"../../configs/syyx_sdk_enum\";\r\nimport { ad_native_interstitial } from \"../../controller/ad/ad_native_interstitial\";\r\nimport { syyx_adv_manager } from \"../../controller/ad/syyx_adv_manager\";\r\nimport { syyx_manager } from \"../../controller/syyx_manager\";\r\nimport { native_ad_data } from \"../../model/model\";\r\nimport { syyx_sdk_api } from \"../../syyx_sdk_api\";\r\nimport { syyx_sdk_utils } from \"../../utils/syyx_sdk_utils\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class syyx_ui_interstitial extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    game_node: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    icon_close: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    native_click: cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    lb_title: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    lb_desc: cc.Label = null;\r\n\r\n    @property(cc.Sprite)\r\n    img_icon: cc.Sprite = null;\r\n\r\n    @property(cc.Node)\r\n    btn_check: cc.Node = null;\r\n\r\n    /**\r\n    * 原生广告数据\r\n    */\r\n    native_data: native_ad_data\r\n\r\n    constructor() {\r\n        super()\r\n\r\n        this.set_background_on_show()\r\n    }\r\n\r\n\r\n    on_click_adv2() {\r\n        if (this.easy_click || ad_native_interstitial.check_is_click_wrap()) {\r\n            this.report_click();\r\n        }\r\n    }\r\n\r\n    on_click_adv() {\r\n        this.report_click();\r\n    }\r\n\r\n    on_click_close() {\r\n        if (ad_native_interstitial.check_is_click_wrap()) {\r\n            this.report_click()\r\n            return\r\n        }\r\n\r\n        let _business_config_data = syyx_manager.get_business_config()\r\n        if (_business_config_data && _business_config_data[\"native_institial_click_close_pro\"]) {\r\n            let trap_pro = _business_config_data[\"native_institial_click_close_pro\"].value[0]\r\n            if (trap_pro >= 0 && Math.random() <= trap_pro) {\r\n                this.report_click()\r\n            }\r\n        }\r\n        this.hide();\r\n    }\r\n\r\n    /**\r\n    * 广告被点击\r\n    */\r\n    report_click() {\r\n        if (this.native_data && this.native_data.adPosId) {\r\n            syyx_sdk_api.send_other_event(e_ad_id.native_interstitial_hall, igc.igc_stat_ids.native_interstitial_click, this.native_data.native_type)\r\n            syyx_adv_manager.report_ad_click(e_ad_id.native_interstitial_hall, this.native_data)\r\n        }\r\n    }\r\n\r\n    /**\r\n    * 广告被曝光\r\n    */\r\n    report_show() {\r\n        if (this.native_data && this.native_data.adPosId) {\r\n            syyx_adv_manager.report_ad_show(e_ad_id.native_interstitial_hall, this.native_data)\r\n        }\r\n    }\r\n\r\n    show(native_data) {\r\n        if (this.node && !this.node.parent) {\r\n            this.native_data = native_data\r\n            let order = syyx_sdk_utils.get_largest_zorder()\r\n            this.node.parent = syyx_sdk_utils.get_stage()\r\n            this.node.zIndex = order\r\n            this.on_show()\r\n        }\r\n    }\r\n\r\n    easy_click\r\n    on_show() {\r\n        this.icon_close.on(cc.Node.EventType.TOUCH_END, this.on_click_close, this)\r\n        this.img_icon.node.on(cc.Node.EventType.TOUCH_END, this.on_click_adv, this)\r\n        this.btn_check.on(cc.Node.EventType.TOUCH_END, this.on_click_adv, this)\r\n        this.native_click.on(cc.Node.EventType.TOUCH_END, this.on_click_adv2, this)\r\n        this.refresh()\r\n        ad_native_interstitial.show_count++\r\n        this.easy_click = false\r\n        let _business_config_data = syyx_manager.get_business_config()\r\n        if (_business_config_data && _business_config_data[\"native_institial_white_easy_click\"]) {\r\n            let easy_click_pro = _business_config_data[\"native_institial_white_easy_click\"].value[0]\r\n            if (easy_click_pro > 0 && Math.random() <= easy_click_pro) {\r\n                this.easy_click = true\r\n            }\r\n        }\r\n    }\r\n\r\n    refresh() {\r\n        syyx_sdk_utils.set_texture_url(this.img_icon, this.native_data.imgUrlList)\r\n        this.lb_title.string = this.native_data.title + \"\"\r\n        this.lb_desc.string = this.native_data.desc + \"\"\r\n        this.report_show()\r\n    }\r\n\r\n    hide() {\r\n        if (this.node && this.node.parent) {\r\n            this.node.parent.removeChild(this.node)\r\n            this.on_hide();\r\n        }\r\n    }\r\n\r\n    on_hide() {\r\n        this.icon_close.off(cc.Node.EventType.TOUCH_END, this.on_click_close, this)\r\n        this.img_icon.node.off(cc.Node.EventType.TOUCH_END, this.on_click_adv, this)\r\n        this.btn_check.off(cc.Node.EventType.TOUCH_END, this.on_click_adv, this)\r\n        this.native_click.off(cc.Node.EventType.TOUCH_END, this.on_click_adv2, this)\r\n    }\r\n\r\n    set_default_pos(style) {\r\n\r\n    }\r\n\r\n    set_style_pos(x, y) {\r\n        x > -10000 && (this.game_node.x = x)\r\n        y > -10000 && (this.game_node.y = y)\r\n    }\r\n\r\n    set_background_on_show() {\r\n        let self = this\r\n        if (syyx_const.syyx_sdk_channel === igc.e_channel_type.hw_qg) {\r\n            //后台到前台\r\n            syyx_sdk_api.on_show(\r\n                function () {\r\n                    if (self && cc.isValid(self.node)) {\r\n                        console.log(\"igc----- native_interstitial set_background_on_show\")\r\n                        self.report_show()\r\n                    }\r\n                }\r\n            )\r\n        }\r\n    }\r\n}\r\n"]}