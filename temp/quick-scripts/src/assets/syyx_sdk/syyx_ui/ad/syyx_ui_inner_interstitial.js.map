{"version":3,"sources":["assets\\syyx_sdk\\syyx_ui\\ad\\syyx_ui_inner_interstitial.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { syyx_const } from \"../../configs/syyx_sdk_config\";\r\nimport { e_ad_id, e_ad_native_state } from \"../../configs/syyx_sdk_enum\";\r\nimport { ad_native_inner_interstitial } from \"../../controller/ad/ad_native_inner_interstitial\";\r\nimport { syyx_adv_manager } from \"../../controller/ad/syyx_adv_manager\";\r\nimport { syyx_manager } from \"../../controller/syyx_manager\";\r\nimport { native_ad_data } from \"../../model/model\";\r\nimport { syyx_sdk_api } from \"../../syyx_sdk_api\";\r\nimport { syyx_sdk_utils } from \"../../utils/syyx_sdk_utils\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class syyx_ui_inner_interstitial extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    icon_close: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    native_node: cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    lb_title: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    lb_desc: cc.Label = null;\r\n\r\n    @property(cc.Sprite)\r\n    img_icon: cc.Sprite = null;\r\n\r\n    /**\r\n     * 原生广告数据\r\n     */\r\n    native_data: native_ad_data\r\n\r\n    //点击结算原生回调\r\n    click_back: Function = undefined\r\n    //结算原生显示回调\r\n    show_back\r\n    //结算原生隐藏回调\r\n    hide_back\r\n\r\n    constructor() {\r\n        super()\r\n\r\n        this.set_background_on_show()\r\n    }\r\n\r\n    on_click_adv() {\r\n        this.report_click()\r\n\r\n    }\r\n\r\n    on_click_close() {\r\n        let _business_config_data = syyx_manager.get_business_config()\r\n        if (_business_config_data && _business_config_data[\"native_inner_institial_click_close_pro\"]) {\r\n            let trap_pro = _business_config_data[\"native_inner_institial_click_close_pro\"].value[0] // 0\r\n            if (trap_pro >= 0 && Math.random() <= trap_pro) {\r\n                this.report_click()\r\n            }\r\n        }\r\n        this.hide();\r\n    }\r\n\r\n    /**\r\n    * 广告被点击\r\n    */\r\n    report_click() {\r\n        if (this.native_data) {\r\n            this.click_back && this.click_back()\r\n            syyx_manager.report_ad_click(e_ad_id.native_inner_interstitial_success, this.native_data) // 10302001\r\n            console.log(\"igc----- has clicked native inner interstitial\")\r\n            // this.hide()\r\n        } else {\r\n            console.log(\"igc----- syyx_ui_inner_interstitial report_click native_data is null!\")\r\n        }\r\n    }\r\n\r\n    /**\r\n    * 广告被曝光\r\n    */\r\n    report_show() {\r\n        if (this.native_data) {\r\n            syyx_adv_manager.report_ad_show(e_ad_id.native_inner_interstitial_success, this.native_data) // // 10302001\r\n        } else {\r\n            console.log(\"igc----- syyx_ui_inner_interstitial report_show native_data is null!\")\r\n        }\r\n    }\r\n\r\n    show(parent, native_data, click_back?: Function, show_back?: Function, hide_back?: Function, is_new_type?: boolean) {\r\n        if (this.node && !this.node.parent) {\r\n            this.native_data = native_data\r\n            this.show_back = show_back || undefined\r\n            this.hide_back = hide_back || undefined\r\n            this.click_back = click_back || undefined\r\n            this.node.parent = parent\r\n            // console.log(\"回调回调。。。。。。。。\")\r\n            this.on_show();\r\n        }\r\n    }\r\n\r\n    /**\r\n    * 上报点击后  重新拉取原生数据刷新界面\r\n    */\r\n    report_click_update_view(native_data) {\r\n        if (this.node && this.node.parent) {\r\n            this.native_data = native_data\r\n            this.refresh()\r\n        }\r\n    }\r\n\r\n    on_show() {\r\n        this.icon_close.on(cc.Node.EventType.TOUCH_END, this.on_click_close, this)\r\n        this.img_icon.node.on(cc.Node.EventType.TOUCH_END, this.on_click_adv, this)\r\n        this.refresh()\r\n        ad_native_inner_interstitial.show_count++\r\n        this.show_back && this.show_back()\r\n    }\r\n\r\n    refresh() {\r\n        syyx_sdk_utils.set_texture_url(this.img_icon, this.native_data.imgUrlList, this.hide.bind(this))\r\n        this.lb_title.string = this.native_data.title + \"\"\r\n        this.lb_desc.string = this.native_data.desc + \"\"\r\n        this.report_show()\r\n    }\r\n\r\n    hide() {\r\n        if (this.node && this.node.parent) {\r\n            this.node.parent.removeChild(this.node)\r\n            this.on_hide();\r\n        }\r\n    }\r\n\r\n    on_hide() {\r\n        this.icon_close.off(cc.Node.EventType.TOUCH_END, this.on_click_close, this)\r\n        this.img_icon.node.off(cc.Node.EventType.TOUCH_END, this.on_click_adv, this)\r\n\r\n        this.hide_back && this.hide_back()\r\n    }\r\n\r\n    set_default_pos(style) {\r\n\r\n    }\r\n\r\n    set_style_pos(x, y) {\r\n\r\n    }\r\n\r\n    set_background_on_show() {\r\n        let self = this\r\n        if (syyx_const.syyx_sdk_channel === igc.e_channel_type.hw_qg) {\r\n            //后台到前台\r\n            syyx_sdk_api.on_show(\r\n                function () {\r\n                    if (self && cc.isValid(self.node)) {\r\n                        console.log(\"igc----- native_inner_interstitial set_background_on_show\")\r\n                        self.report_show()\r\n                    }\r\n                }\r\n            )\r\n        }\r\n    }\r\n\r\n}\r\n"]}