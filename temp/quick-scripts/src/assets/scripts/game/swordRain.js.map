{"version":3,"sources":["assets\\scripts\\game\\swordRain.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { caijiTools } from \"../caijiTools\";\nimport rock from \"./rock\";\nimport skillPool from \"./skillPool\";\nimport swordItem from \"./swordItem\";\nimport swordItem2 from \"./swordItem2\";\nimport swordSmoke from \"./swordSmoke\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class swordRain extends cc.Component {\n\n    isRight:boolean=false;//朝右\n    offsetForward_x1:number=400;//技能方向正偏移\n    offsetReverse_x1:number=1500;//技能方向反偏移\n    offsetForward_x2:number=500;//技能方向正偏移\n    offsetReverse_x2:number=1600;//技能方向反偏移\n    duration:number=1.8;\n\n    smokeX_min:number=0;\n    smokeX_max:number=0;\n    start () {\n        if(this.isRight){\n            this.smokeX_min=250;\n            this.smokeX_max=580;\n        }else{\n            this.smokeX_max=-250;\n            this.smokeX_min=-580;\n        }\n        if(this.isRight){\n            this.node.children[0].active=true;\n        }else{\n            this.node.children[1].active=true;\n        }\n        this.schedule(this.createSword,0.06);\n        this.scheduleOnce(()=>{\n            this.schedule(this.createSword2,0.04);\n            this.schedule(this.createSmoke,0.06);\n        },0.3);\n        this.scheduleOnce(()=>{\n            this.destory();\n        },this.duration);\n    }\n    destory(){\n        this.unscheduleAllCallbacks();\n        cc.tween(this.node)\n        .to(0.2,{opacity:0})\n        .call(()=>{\n            this.node.children[0].active=false;\n            this.node.children[1].active=false;\n            this.scheduleOnce(()=>{\n                this.node.destroy();\n            },1);\n        })\n        .start();\n    }\n    createSword(){\n        for(let i=0;i<2;i++){\n            let sword=skillPool.instance.getSword1();\n            sword.setParent(this.node);\n            sword.setPosition(this.getRandomX_sword1()/10,caijiTools.random_int(-500,1100)/10);\n            sword.active=true;\n            sword.getComponent(swordItem).isRight=this.isRight;\n            sword.getComponent(swordItem).tween();\n        }\n    }\n    createSword2(){\n        for(let i=0;i<3;i++){\n            let sword2=skillPool.instance.getSword2();\n            sword2.setParent(this.node);\n            sword2.setSiblingIndex(cc.macro.MIN_ZINDEX);\n            sword2.setPosition(this.getRandomX_sword2()/10,caijiTools.random_int(-700,1300)/10);\n            sword2.active=true;\n            sword2.getComponent(swordItem2).isRight=this.isRight;\n            sword2.getComponent(swordItem2).tween();\n        }\n    }\n    getRandomX_sword1(){\n        if(this.isRight){\n            return caijiTools.random_int(-this.offsetReverse_x1,this.offsetForward_x1);\n        }else{\n            return caijiTools.random_int(-this.offsetForward_x1,this.offsetReverse_x1);\n        }\n    }\n    getRandomX_sword2(){\n        if(this.isRight){\n            return caijiTools.random_int(-this.offsetReverse_x2,this.offsetForward_x2);\n        }else{\n            return caijiTools.random_int(-this.offsetForward_x2,this.offsetReverse_x2);\n        }\n    }\n    createSmoke(){\n        let smoke=skillPool.instance.getSwordSmoke();\n        let nodePos=cc.v2(0,0);\n        nodePos.x=caijiTools.random_int(this.smokeX_min,this.smokeX_max);\n        nodePos.y=caijiTools.random_int(-370,-420);\n        smoke.setParent(this.node);\n        smoke.setPosition(nodePos);\n        smoke.getComponent(swordSmoke).tween();\n        smoke.active=true;\n        this.createRock(nodePos);\n    }\n    createRock(pos:cc.Vec2){\n        let rockNode=skillPool.instance.getRock();\n        rockNode.setParent(this.node);\n        rockNode.setPosition(pos);\n        rockNode.getComponent(rock).tween();\n        rockNode.active=true;\n    }\n}\n"]}