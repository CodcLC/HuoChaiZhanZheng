{"version":3,"sources":["assets\\scripts\\game\\firePillarCollider.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { audioName } from \"../audioNameMgr\";\nimport audioManager from \"../main/audioManager\";\nimport enemyHitCollider from \"./enemyHitCollider\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class firePillarCollider extends cc.Component {\n\n    @property(cc.Node)\n    fireSmoke1:cc.Node=null;\n    @property(cc.Node)\n    fireSmoke2:cc.Node=null;\n\n    damage:number=0;\n    interval:number=0.3;//攻击间隔\n    enemyHitCollider:enemyHitCollider=null;\n    isStay:boolean=false;\n    onLoad () {\n        this.enemyHitCollider=this.node.getComponent(enemyHitCollider);\n    }\n\n    start () {\n        audioManager.playAudio(audioName.E20FirePillar,false,0.5);\n        this.scheduleOnce(()=>{\n            this.fireSmoke2.active=true;\n        },0.23);\n        this.scheduleOnce(()=>{\n            this.fireSmoke1.getComponent(cc.Animation).stop();\n            this.fireSmoke2.getComponent(cc.Animation).stop();\n            cc.tween(this.fireSmoke1).to(0.1,{opacity:0}).start();\n            cc.tween(this.fireSmoke2).to(0.1,{opacity:0}).start();\n            this.node.getComponent(cc.BoxCollider).enabled=false;\n        },4);\n        this.scheduleOnce(()=>{\n            this.node.children[1].active=true;\n            this.node.children[0].active=false;\n            this.node.getComponent(cc.BoxCollider).enabled=true;\n        },0.8);\n    }\n    hit(){\n        this.enemyHitCollider.hit(this.node,this.damage);\n        this.scheduleOnce(()=>{\n            if(this.isStay){\n                this.hit();\n            }\n        },this.interval);\n    }\n    onCollisionEnter(other:cc.Collider,self:cc.Collider){\n        this.isStay=true;\n        this.scheduleOnce(()=>{\n            this.hit();\n        },0);\n    }\n/*     onCollisionStay(other:cc.Collider,self:cc.Collider){\n        if(this.isStay) return;\n        this.isStay=true;\n        this.schedule(this.hit,this.interval);\n        \n    } */\n    onCollisionExit(other:cc.Collider,self:cc.Collider){\n        this.isStay=false;\n        //this.unschedule(this.hit);\n    }\n}\n"]}