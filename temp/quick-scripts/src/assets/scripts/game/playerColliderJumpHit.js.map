{"version":3,"sources":["assets\\scripts\\game\\playerColliderJumpHit.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAElF,gDAA4C;AAE5C,mDAA2D;AAC3D,6CAAwC;AACxC,0CAAqC;AAE/B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAmD,yCAAY;IAA/D;QAAA,qEA0CC;QAvCG,iBAAW,GAAQ,IAAI,CAAC,CAAA,MAAM;QAC9B,WAAK,GAAQ,CAAC,CAAC;QACf,iBAAW,GAAQ,CAAC,CAAC;QACrB,YAAM,GAAgB,EAAE,CAAC;QACzB,kBAAY,GAAgB,EAAE,CAAC;;IAmCnC,CAAC;IAlCG,yCAAS,GAAT;QACI,IAAI,CAAC,KAAK,GAAC,CAAC,CAAC;QACb,IAAI,CAAC,MAAM,GAAC,EAAE,CAAC;QACf,IAAI,CAAC,YAAY,GAAC,EAAE,CAAC;IACzB,CAAC;IACD,wCAAQ,GAAR;QACI,IAAI,CAAC,WAAW,GAAC,kBAAQ,CAAC,QAAQ,CAAC,WAAW,GAAC,qBAAW,CAAC,QAAQ,CAAC,gBAAgB,CAAC,eAAe,CAAC;IACzG,CAAC;IACD,qCAAK,GAAL;QACI,IAAI,CAAC,WAAW,GAAC,IAAI,CAAC,WAAW,GAAC,CAAC,kBAAQ,CAAC,QAAQ,CAAC,UAAU,GAAC,CAAC,CAAC,GAAC,EAAE,CAAC;IAC1E,CAAC;IACD,sCAAM,GAAN,UAAO,EAAE;QACL,IAAI,CAAC,KAAK,IAAE,EAAE,CAAC;QACf,IAAG,IAAI,CAAC,KAAK,IAAE,IAAI,CAAC,WAAW,EAAC;YAC5B,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAC,2BAAU,CAAC,OAAO,CAAC,CAAC;YAC9C,IAAI,CAAC,KAAK,GAAC,CAAC,CAAC;SAChB;IACL,CAAC;IACD,mCAAG,GAAH,UAAI,UAAiB,EAAC,UAAqB;QACvC,qCAAqC;QACrC,KAAiB,UAAW,EAAX,KAAA,IAAI,CAAC,MAAM,EAAX,cAAW,EAAX,IAAW,EAAC;YAAzB,IAAI,KAAK,SAAA;YACT,YAAY;YACZ,KAAK,CAAC,YAAY,CAAC,4BAAW,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,UAAU,EAAC,UAAU,CAAC,CAAC;YACzE,YAAY;YACZ,KAAK,CAAC,YAAY,CAAC,4BAAW,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,cAAc,CAAC,wBAAS,CAAC,SAAS,CAAC,CAAC;SACnF;IACL,CAAC;IACD,gDAAgB,GAAhB,UAAiB,KAAiB,EAAC,IAAgB;QAC/C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IACD,+CAAe,GAAf,UAAgB,KAAiB,EAAC,IAAgB;QAC9C,IAAI,KAAK,GAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAC1C,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAC,CAAC,CAAC,CAAC;IAChC,CAAC;IAtCD;QADC,QAAQ,CAAC,EAAC,IAAI,EAAC,EAAE,CAAC,KAAK,EAAC,WAAW,EAAC,MAAM,EAAC,CAAC;8DACrB;IAHP,qBAAqB;QADzC,OAAO;OACa,qBAAqB,CA0CzC;IAAD,4BAAC;CA1CD,AA0CC,CA1CkD,EAAE,CAAC,SAAS,GA0C9D;kBA1CoB,qBAAqB","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { audioName } from \"../audioNameMgr\";\nimport audioManager from \"../main/audioManager\";\nimport { attackType, enemyScript } from \"./animationState\";\nimport GameManager from \"./GameManager\";\nimport playerHp from \"./ui/playerHp\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class playerColliderJumpHit extends cc.Component {\n\n    @property({type:cc.Float,displayName:\"攻击间隔\"})\n    hitInterval:number=0.15;//攻击间隔\n    timer:number=0;\n    damageScale:number=0;\n    enemys:Array<cc.Node>=[];\n    enemysHadHit:Array<cc.Node>=[];\n    onDisable () {\n        this.timer=0;\n        this.enemys=[];\n        this.enemysHadHit=[];\n    }\n    onEnable(){\n        this.damageScale=playerHp.instance.damageScale*GameManager.instance.playerController.damageScaleZoom;\n    }\n    start(){\n        this.hitInterval=this.hitInterval-(playerHp.instance.speedTimes-1)/15;\n    }\n    update(dt){\n        this.timer+=dt;\n        if(this.timer>=this.hitInterval){\n            this.hit(this.damageScale,attackType.jumpHit);\n            this.timer=0;\n        }\n    }\n    hit(damgeScale:number,attackType:attackType){\n        //console.log(damgeScale,attackType);\n        for(let enemy of this.enemys){\n            //@ts-ignore\n            enemy.getComponent(enemyScript[enemy.name]).beHit(damgeScale,attackType);\n            //@ts-ignore\n            enemy.getComponent(enemyScript[enemy.name]).playBeHitSound(audioName.airslash1);\n        }\n    }\n    onCollisionEnter(other:cc.Collider,self:cc.Collider){\n        this.enemys.push(other.node);\n    }\n    onCollisionExit(other:cc.Collider,self:cc.Collider){\n        let index=this.enemys.indexOf(other.node);\n        this.enemys.splice(index,1);\n    }\n}\n"]}