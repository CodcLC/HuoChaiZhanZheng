{"version":3,"sources":["assets\\scripts\\game\\ui\\uiManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { caijiTools } from \"../../caijiTools\";\nimport { ad } from \"../../sdk/ad\";\nimport { uiName } from \"../../uiBase\";\nimport GameManager from \"../GameManager\";\nimport bossHp, { bossName } from \"./bossHp\";\nimport playerHp from \"./playerHp\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class uiManager extends cc.Component {\n\n    @property(cc.Node)\n    wuDiNode:cc.Node=null;\n    @property(cc.Node)\n    doubleDmgNode:cc.Node=null;\n    @property(cc.Node)\n    fullHpNode:cc.Node=null;\n    @property(cc.Node)\n    bossHpNode:cc.Node=null;\n    @property(cc.Node)\n    loadingNodeStart:cc.Node=null;\n    @property(cc.Node)\n    loadingNodeEnd:cc.Node=null;\n\n    bossHp:bossHp=null;\n    static ins:uiManager=null;\n\n    onLoad () {\n        uiManager.ins=this;\n    }\n\n    start () {\n        this.init();\n    }\n    init(){\n        this.loadingNodeStart.width=cc.winSize.width*2;\n        this.loadingNodeEnd.width=cc.winSize.width*2;\n        this.loadingNodeEnd.active=true;\n    }\n    lose(){\n        this.scheduleOnce(()=>{\n            caijiTools.showPopup(uiName.losePanel,this.node);\n        },1.5);\n    }\n    pause(){\n        caijiTools.showPopup(uiName.pausePanel,this.node);\n    }\n    win(){\n        GameManager.instance.levelCompletEvent();\n        this.scheduleOnce(()=>{\n            caijiTools.showPopup(uiName.winPanel,this.node);\n        },2.5);\n    }\n    showUi(){\n        this.wuDiNode.active=true;\n        this.doubleDmgNode.active=true;\n        this.fullHpNode.active=true;\n    }\n    async showWuDiPopup(){\n        await caijiTools.showPopup(uiName.wuDiPopup,this.node);\n        cc.director.pause();\n    }\n    async showFullHpPopup(){\n        await caijiTools.showPopup(uiName.fullHpPopup,this.node);\n        cc.director.pause();\n    }\n    async showDoubleDamagePopup(){\n        await caijiTools.showPopup(uiName.doubleDamagePopup,this.node);\n        cc.director.pause();\n    }\n    wuDi(){\n        if(GameManager.instance.playerController.isDie) return;\n        this.wuDiNode.active=false;\n        GameManager.instance.playerController.openWuDi(20);\n        this.scheduleOnce(()=>{\n            this.wuDiNode.active=true;\n        },10);\n    }\n    doubleDamage(){\n        if(GameManager.instance.playerController.isDie) return;\n        playerHp.instance.damageScale*=2;\n        this.doubleDmgNode.active=false;\n    }\n    fullHp(){\n        if(GameManager.instance.playerController.isDie) return;\n        playerHp.instance.fullHp();\n    }\n    showBossHp(bossName:string){\n        this.bossHp=this.bossHpNode.getComponent(bossHp);\n        this.bossHp.bossName=bossName;\n        this.bossHp.init(()=>{\n            this.bossHpNode.active=true;\n        });\n    }\n    loadingStart(callBack:Function){\n        this.loadingNodeStart.x=cc.winSize.width/2;\n        this.loadingNodeStart.width=cc.winSize.width+1064;\n        this.loadingNodeStart.active=true;\n        let movex=-this.loadingNodeStart.width*this.loadingNodeStart.scaleX;\n        cc.tween(this.loadingNodeStart)\n        .by(0.6,{x:movex})\n        .call(()=>{\n            callBack();\n        })\n        .start();\n    }\n    loadingEnd(){\n        this.loadingNodeEnd.x=-cc.winSize.width/2;\n        this.loadingNodeEnd.width=cc.winSize.width+1064;\n        this.loadingNodeEnd.active=true;\n        this.loadingNodeStart.active=false;\n        let movex=-this.loadingNodeEnd.width*Math.abs(this.loadingNodeEnd.scaleX);\n        cc.tween(this.loadingNodeEnd)\n        .by(0.6,{x:movex})\n        .call(()=>{\n            this.loadingNodeEnd.active=false;\n            GameManager.instance.spawnPlayer();\n        })\n        .start();\n    }\n}\n"]}