{"version":3,"sources":["assets\\scripts\\game\\thunder_chase.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport enemyHitCollider from \"./enemyHitCollider\";\nimport GameManager from \"./GameManager\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class thunder_chase extends cc.Component {\n\n    damage:number=0;\n    isOpenCollider:boolean=false;\n    interval:number=0.2;\n    isCD:boolean=false;\n    player:cc.Node=null;\n    // onLoad () {}\n\n    start () {\n        this.scheduleOnce(()=>{\n            this.isOpenCollider=true;\n            if(this.player!=null && this.isCD==false){\n                this.hit();\n            }\n        },0.5);\n        this.scheduleOnce(()=>{\n            this.isOpenCollider=false;\n        },2);\n        this.scheduleOnce(()=>{\n            this.node.destroy();\n        },2.5);\n    }\n\n    onCollisionEnter(other:cc.Collider,self:cc.Collider){\n        //if(this.isOpenCollider==false ||this.isCD) return;\n        if(other.node.group==\"player\"){\n            this.player=other.node;\n            this.hit();\n        }\n    }\n/*     onCollisionStay(other:cc.Collider,self:cc.Collider){\n        if(this.isOpenCollider==false ||this.isCD) return;\n        if(other.node.group==\"player\"){\n            this.hit();\n        }\n    } */\n    onCollisionExit(other:cc.Collider,self:cc.Collider){\n        //if(this.isOpenCollider==false ||this.isCD) return;\n        if(other.node.group==\"player\"){\n            this.player=null;\n        }\n    }\n    hit(){\n        if(this.isOpenCollider==false||GameManager.instance.playerController.thunder_chase_cd){\n            this.scheduleOnce(()=>{\n                if(this.player==null) return;\n                this.hit();\n            },this.interval);\n            return;\n        }\n        this.enterCD();\n        this.playerEnterCd();\n        this.node.getComponent(enemyHitCollider).hit(this.node,this.damage);\n        this.scheduleOnce(()=>{\n            if(this.player==null) return;\n            this.hit();\n        },this.interval);\n    }\n    enterCD(){\n        this.isCD=true;\n        this.scheduleOnce(()=>{\n            this.isCD=false;\n        },this.interval);\n    }\n    playerEnterCd(){\n        GameManager.instance.playerController.thunder_chase_cd=true;\n        this.scheduleOnce(()=>{\n            GameManager.instance.playerController.thunder_chase_cd=false;\n        },this.interval);\n    }\n}\n"]}