{"version":3,"sources":["assets\\scripts\\game\\dropBloodBottle.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport GameManager from \"./GameManager\";\nimport playerHp from \"./ui/playerHp\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class dropBloodBottle extends cc.Component {\n\n    hp:number=100;\n    forceX:number=30000;\n    forceY:number=20000;\n    rigibody:cc.RigidBody=null;\n    isMoveToPlayer:boolean=false;\n    speed:number=500;\n    targetPosition:cc.Vec3=null;\n\n    onLoad(){\n        this.rigibody=this.node.getComponent(cc.RigidBody);\n    }\n    start () {\n        this.forceX=this.node.x>GameManager.instance.player.x?this.forceX:-this.forceX;\n        this.rigibody.applyForceToCenter(cc.v2(this.forceX,this.forceY),false);\n    }\n    update(){\n        if(this.isMoveToPlayer){\n            this.moveToPlayer();\n        }\n    }\n    onBeginContact(contact: cc.PhysicsContact, selfCollider: cc.PhysicsCollider, otherCollider: cc.PhysicsCollider) {\n        let other = otherCollider.node;\n        if (other.group == \"ground\") {\n            this.rigibody.linearVelocity=cc.v2(0,0);\n        }else if(other.group==\"player\"&&other.name==\"player\"){\n            if(GameManager.instance.playerController.isDie) return;\n            contact.disabled=true;\n            this.isMoveToPlayer=true;\n        }\n    }\n    moveToPlayer(){\n        this.targetPosition=cc.v3(GameManager.instance.player.x,GameManager.instance.player.y+70)\n        let direct=this.targetPosition.sub(this.node.position).normalizeSelf();\n        this.rigibody.linearVelocity=cc.v2(direct.x*this.speed,direct.y*this.speed);\n        let len=this.targetPosition.sub(this.node.position).len();\n        if(len<10){\n            this.addHp();\n            this.node.active=false;\n            this.node.destroy();\n        }\n    }\n    addHp(){\n        this.rigibody.enabledContactListener=false;\n        playerHp.instance.addHp(this.hp);\n        this.node.destroy();\n    }\n}\n"]}