{"version":3,"sources":["assets\\scripts\\game\\thunder_jolt.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { audioName } from \"../audioNameMgr\";\nimport audioManager from \"../main/audioManager\";\nimport cameraControl from \"./cameraControl\";\nimport enemyHitCollider from \"./enemyHitCollider\";\nimport GameManager from \"./GameManager\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class thunder_jolt extends cc.Component {\n\n    isTurn:boolean=false;\n\n    speed_x:number=300;\n    speed_y:number=0;\n    speedMax_y:number=300;\n    damage:number=0;\n    rigibody:cc.RigidBody=null;\n\n    onLoad () {\n        this.rigibody=this.node.getComponent(cc.RigidBody);\n    }\n\n    start () {\n\n    }\n    update(){\n        if(this.isTurn){\n            this.rigibody.linearVelocity=cc.v2(this.speed_x,this.rigibody.linearVelocity.y);\n        }\n        if(this.node.y<-500){\n            this.node.destroy();\n        }\n    }\n    onCollisionEnter(other:cc.Collider,self:cc.Collider){\n        if(other.node.group==\"player\"){\n            this.scheduleOnce(()=>{\n                this.node.getComponent(enemyHitCollider).hit(this.node,this.damage);\n            },0);\n        }\n    }\n    onBeginContact(contact: cc.PhysicsContact, selfCollider: cc.PhysicsCollider, otherCollider: cc.PhysicsCollider) {\n        let other = otherCollider.node;\n        if (other.group == \"ground\") {\n            this.playerAudio();\n            if(this.isTurn) return;\n            this.isTurn=true;\n            this.changDirection();\n        }else if(other.group == \"player\"){\n            contact.disabled=true;\n        }\n    }\n    playerAudio(){\n        let worldPos=this.node.parent.convertToNodeSpaceAR(this.node.position);\n        let screenPos=cameraControl.instance.mainCamera.getWorldToScreenPoint(worldPos);\n        if(screenPos.x<0&&screenPos.x>-cc.winSize.width){\n            audioManager.playAudio(audioName.E27LightningJolt);\n        }\n    }\n    changDirection(){\n        this.speed_x=this.node.x>GameManager.instance.player.x?-this.speed_x:this.speed_x;\n    }\n}\n"]}