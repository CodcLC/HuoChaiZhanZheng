{"version":3,"sources":["assets\\scripts\\game\\swordItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { audioName } from \"../audioNameMgr\";\nimport { caijiTools } from \"../caijiTools\";\nimport audioManager from \"../main/audioManager\";\nimport { attackType, enemyScript } from \"./animationState\";\nimport GameManager from \"./GameManager\";\nimport rock from \"./rock\";\nimport skillPool from \"./skillPool\";\nimport swordSmoke from \"./swordSmoke\";\nimport playerHp from \"./ui/playerHp\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class swordItem extends cc.Component {\n\n    isRight:boolean=false;\n    isDestory:boolean=false;\n    rightAngle:number=138;\n    leftAngle:number=42;\n    offsetX:number=74;\n    offsetY:number=-67;\n    movex1:number=0;\n    movey1:number=0;\n    movex2:number=0;\n    movey2:number=0;\n    damage:number=0;\n    enemysHadHit: Array<cc.Node> = [];\n    onLoad () {\n        this.movex1=this.offsetX*0.3;\n        this.movey1=this.offsetY*0.3;\n        this.movex2=this.offsetX*5;\n        this.movey2=this.offsetY*5;\n    }\n    onEnable(){\n\n    }\n    init(){\n        this.movex1=this.isRight?Math.abs(this.movex1):-Math.abs(this.movex1);\n        this.movex2=this.isRight?Math.abs(this.movex2):-Math.abs(this.movex2);\n    }\n    tween () {\n        //cc.v2(74,67);\n        this.init();\n        let scaleXOffset:number=caijiTools.random_int(50,60)/10;\n        this.node.angle=this.isRight?this.rightAngle:this.leftAngle;\n        cc.tween(this.node)\n        .by(0.04,{scale:1})\n        .by(0.12,{position:cc.v3(this.movex1,this.movey1)})\n        .parallel(\n            cc.tween().by(0.1,{scaleX:scaleXOffset},{easing:\"sineIn\"}),\n            cc.tween().by(0.1,{scaleY:-0.5,position:cc.v3(this.movex2,this.movey2)})\n        )\n        .start();\n        this.scheduleOnce(()=>{\n            skillPool.instance.recoverySword1(this.node);\n        },0.25);\n    }\n/*     onBeginContact (contact:cc.PhysicsContact,selfCollider:cc.PhysicsCollider,otherCollider:cc.PhysicsCollider) {\n        let other=otherCollider.node;\n        let pos=contact.getWorldManifold();\n        contact.disabled=true;\n        if (other.group == \"ground\") {\n            //落地\n            if(this.isDestory) return;\n            this.isDestory=true;\n            this.createSmoke(pos.points[0],other);\n        }else if(other.group==\"enemy\"){\n            //击中敌人\n            if(this.enemysHadHit.includes(other)) return;\n            //@ts-ignore\n            other.getComponent(enemyScript[other.name]).beHit(this.damage, attackType.swordRain);\n            this.enemysHadHit.push(other);\n        }\n    } */\n    createSmoke(collidePos:cc.Vec2,ground:cc.Node){\n        let smoke=skillPool.instance.getSwordSmoke();\n        let nodePos=this.node.parent.parent.convertToNodeSpaceAR(collidePos);\n        nodePos.x=nodePos.x+caijiTools.random_int(-300,100)/10;\n        nodePos.y=nodePos.y+caijiTools.random_int(100,500)/10;\n        smoke.setParent(this.node.parent.parent);\n        smoke.setSiblingIndex(ground.getSiblingIndex()-1);\n        smoke.setPosition(nodePos);\n        smoke.getComponent(swordSmoke).tween();\n        smoke.active=true;\n        this.createRock(nodePos);\n        skillPool.instance.recoverySword1(this.node);\n    }\n    createRock(pos:cc.Vec2){\n        let rockNode=skillPool.instance.getRock();\n        rockNode.setParent(this.node.parent.parent);\n        rockNode.setPosition(pos);\n        rockNode.getComponent(rock).tween();\n        rockNode.setSiblingIndex(rockNode.getSiblingIndex()-1);\n        rockNode.active=true;\n    }\n    reuse(){\n        cc.Tween.stopAllByTarget(this.node);\n        this.isDestory=false;\n    }\n    unuse(){\n        this.node.scale=0;\n        this.enemysHadHit=[];\n    }\n}\n"]}