{"version":3,"sources":["assets\\scripts\\game\\miniBossController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { audioName } from \"../audioNameMgr\";\nimport { caijiTools } from \"../caijiTools\";\nimport audioManager from \"../main/audioManager\";\nimport { attackType, enemyName, enemyState } from \"./animationState\";\nimport E39Laser from \"./E39Laser\";\nimport enemyAnimation from \"./enemyAnimation\";\nimport enemyBase from \"./enemyBase\";\nimport enemyHitCollider from \"./enemyHitCollider\";\nimport Events from \"./Events\";\nimport GameManager from \"./GameManager\";\nimport thunder_chase from \"./thunder_chase\";\nimport thunder_jolt from \"./thunder_jolt\";\nimport { bossName } from \"./ui/bossHp\";\nimport uiManager from \"./ui/uiManager\";\n\nconst { ccclass, property } = cc._decorator;\nenum damageCollider {\n    laser,\n    forward,\n    scratch\n}\n@ccclass\nexport default class miniBossController extends enemyBase {\n\n    @property(cc.Prefab)\n    thunder_jolt_prefab: cc.Prefab = null;\n    @property(cc.Prefab)\n    thunder_one_prefab: cc.Prefab = null;\n    @property(cc.Prefab)\n    thunder_many_prefab1: cc.Prefab = null;\n    @property(cc.Prefab)\n    thunder_many_prefab2: cc.Prefab = null;\n    @property(cc.Prefab)\n    flag_prefab: cc.Prefab = null;\n    @property(cc.Prefab)\n    tpFx_start: cc.Prefab = null;\n\n    @property({ type: cc.Float, tooltip: \"伤害效果x轴偏移值\" })\n    damageLabelOffsetX: number = 0;\n    @property({ type: cc.Float, tooltip: \"伤害效果y轴偏移值\" })\n    damageLabelOffsetY: number = 0;\n    @property(cc.String)\n    dieEffectName: string = \"\";\n\n    rushSpeed: number = 700;//冲击速度\n    moveSpeed: number = 140;//移动速度\n    nowSpeed: number = 0;//当前速度\n    AI_interval: number = 0.7;//ai间隔\n    stopDistance: number = 400;//停止距离\n    hp: number = 0;\n    hpTimes: number = 1;//血量倍数\n    beHitForce_y: number = 25000;//手里剑攻击作用力\n    beHitForce_x: number = 25000//普通攻击作用力\n    beHitForce_y_shuriken: number = 50000//普通攻击作用力\n    beHitForce_x_attack3: number = 350000;//被击飞作用力\n    beHitForce_y_attack3: number = 0;//被击飞作用力\n    scaleX_skeleton: number = 0;\n    allowMoveTime: number = 2;//允许move状态最长时间\n    allowAttackTime: number = 2;//允许连续attack次数\n    attackTimes: number = 0;//attack连续次数\n    skill1_x: number = 0;//泰山压顶落地坐标（升空时玩家位置）\n    isStartRush: boolean = false;//开始冲撞\n    isDie: boolean = false;\n    skeleton: sp.Skeleton = null;\n    enemyAnimation: enemyAnimation = null;\n    rigibody: cc.RigidBody = null;\n    boxCollider: cc.PhysicsBoxCollider = null;\n    isSwordRainCd: boolean = false;\n    isMove: boolean = false;//是否处于移动状态\n    isWuDi: boolean = true;//无敌状态\n    dmgCollider: damageCollider = null;\n    isHighLight: boolean = false;\n    highLight_A = {\n        a: 0.5\n    };\n    nomalAttackMax: number = 5;//普通攻击连续最大次数\n    normalAttackTimes: number = 0;//普通攻击次数（达一定次数后升空放小蜘蛛）\n    lastAttackState: enemyState = null;\n    spiderlingPrefab: cc.Prefab = null;\n    attackType:enemyState[]=[];\n\n    onLoad() {\n        this.skeleton = this.node.children[0].getComponent(sp.Skeleton);\n        this.scaleX_skeleton = Math.abs(this.skeleton.node.scaleX);\n        this.enemyAnimation = this.node.children[0].getComponent(enemyAnimation);\n        this.enemyAnimation.enemyController = this;\n        this.rigibody = this.node.getComponent(cc.RigidBody);\n        this.boxCollider = this.node.getComponent(cc.PhysicsBoxCollider);\n    }\n    start() {\n        this.init();\n        //@ts-ignore\n        //console.log(this.skeleton.skeletonData._skeletonCache.animations);\n    }\n    init() {\n        uiManager.ins.showBossHp(bossName.miniBoss);\n        this.initData();\n        this.hp = this.hpMax * this.hpTimes;\n        audioManager.playAudio(audioName.ThunderTotemStruck);\n    }\n    appearFinished() {\n        this.isWuDi = false;\n        this.idle();\n    }\n    update() {\n        this.highLightAction();\n        if (this.isMove == false) return;\n        let distance = this.getDistanceX();\n        if (Math.abs(distance) < this.stopDistance) {\n            this.attack();\n        } else {\n            if (this.enemyAnimation.state == enemyState.attack) return;\n            this.moveToPlayer();\n        }\n    }\n    onBeginContact(contact: cc.PhysicsContact, selfCollider: cc.PhysicsCollider, otherCollider: cc.PhysicsCollider) {\n        let other = otherCollider.node;\n        // let worldManifold = contact.getWorldManifold();\n        // let normal = worldManifold.normal;\n        if (other.group == \"wall\") {\n            contact.disabled=true;\n        }\n    }\n    showDamageCollider(collider: damageCollider) {\n        this.skeleton.node.children[collider].active = true;\n        this.dmgCollider = collider;\n    }\n    getDamageCollider() {\n        return this.skeleton.node.children[this.dmgCollider];\n    }\n    hideDamageCollider() {\n        if (this.dmgCollider == null) return;\n        this.skeleton.node.children[this.dmgCollider].active = false;\n        this.dmgCollider = null;\n    }\n    AI_start() {\n        if (this.isDie) return;\n        if (GameManager.instance.playerController.isDie) {\n            //玩家已死 停止移动\n            this.changeMovState(false);\n            this.scheduleOnce(() => {\n                this.AI_start();\n            }, 1);\n            if ([enemyState.idle].includes(this.enemyAnimation.state)) return;\n            this.enemyAnimation.changeState(enemyState.idle, 1, true, true);\n            return;\n        }\n        let distance = Math.abs(this.getDistanceX());\n        if (distance < this.stopDistance) {\n            this.attack();\n        } else {\n            this.changeDirection();\n            this.enemyAnimation.changeState(enemyState.move, 1, true, true, true);\n            this.changeMovState(true);\n            this.nowSpeed = this.skeleton.node.scaleX > 0 ? -this.moveSpeed : this.moveSpeed;\n        }\n    }\n    AI_stop() {\n        this.idle();\n    }\n    changeMovState(isMove: boolean) {\n        this.isMove = isMove;\n    }\n    idle() {\n        this.changeMovState(false);\n        this.setLinearDamping(0);\n        this.setRigibodySpeed(0, 0);\n        this.enemyAnimation.changeState(enemyState.idle, 1, true, true);\n        this.scheduleOnce(()=>{\n            if(this.enemyAnimation.state!=enemyState.idle) return;\n            this.AI_start();\n        },this.AI_interval);\n    }\n    attack() {\n        this.changeDirection();\n        this.setRigibodySpeed(0, 0);\n        this.changeMovState(false);\n        this.setLinearDamping(0);\n        this.normalAttackTimes++;\n        if(this.getDistanceX()<150){\n            this.blinkStart();\n            return;\n        }\n        if(this.attackType.length==0){\n            this.attackType=[\n                enemyState.call_of_lighting,\n                enemyState.lighting_chase_start,\n                enemyState.storm_burst,\n                enemyState.thunder_jolt\n            ];\n        }\n        let random = caijiTools.random_int(0, this.attackType.length - 1);\n        let state = this.attackType[random];\n        if(state==this.lastAttackState){\n            if(random==0){\n                state = this.attackType[random+1];\n            }else if(random==this.attackType.length-1){\n                state = this.attackType[random-1];\n            }else{\n                state = this.attackType[random-1];\n            }\n        }\n        this[enemyState[state]]();\n        this.attackType.splice(this.attackType.indexOf(state), 1);\n        // switch (state) {\n        //     case enemyState.call_of_lighting:\n        //         this.call_of_lighting();\n        //         break;\n        //     case enemyState.lighting_chase_start:\n        //         this.lighting_chase_start();\n        //         break;\n        //     case enemyState.storm_burst:\n        //         this.storm_burst();\n        //         break;\n        //     case enemyState.thunder_jolt:\n        //         this.thunder_jolt();\n        //         break;\n        // }\n        this.lastAttackState = state;\n    }\n    //召唤旗帜\n    call_of_lighting() {\n        audioManager.playAudio(audioName.E27TotemCast);\n        this.enemyAnimation.changeState(enemyState.call_of_lighting, 1, false);\n        this.scheduleOnce(() => {\n            this.FX_flag();\n        }, 1.3);\n    }\n    //持续召唤雷球（持续多段伤害）\n    lighting_chase_start() {\n        GameManager.instance.playerController.thunder_chase_cd=false;\n        this.enemyAnimation.changeState(enemyState.lighting_chase_start, 1, false);\n    }\n    lighting_chase_middle() {\n        audioManager.playAudio(audioName.E27Lightning);\n        this.enemyAnimation.changeState(enemyState.lighting_chase_middle, 1, true);\n        this.schedule(() => {\n            this.FX_thunerBall_pos();\n        }, 0.55, 8);\n        this.scheduleOnce(() => {\n            this.lighting_chase_end();\n        }, 5);\n    }\n    lighting_chase_end() {\n        this.enemyAnimation.changeState(enemyState.lighting_chase_end, 1, true);\n    }\n    //召唤溜溜球\n    thunder_jolt() {\n        audioManager.playAudio(audioName.E27JoltCast);\n        this.enemyAnimation.changeState(enemyState.thunder_jolt, 1, false);\n        this.scheduleOnce(() => {\n            this.FX_thunder_jolt();\n        }, 1);\n    }\n    //雷球风暴（扩散单段伤害）\n    storm_burst() {\n        this.enemyAnimation.changeState(enemyState.storm_burst, 1, false);\n        this.FX_thunder_stormBurst1();\n    }\n    //传送动作开始\n    blinkStart() {\n        this.setRigibodySpeed(0);\n        this.changeMovState(false);\n        this.enemyAnimation.changeState(enemyState.blink_start, 1, false, true);\n        this.scheduleOnce(()=>{\n            audioManager.playAudio(audioName.BlinkStart);\n        },0.2);\n    }\n    //传送开始动画完成\n    binkStartCompelete() {\n        this.createTPFX();\n        this.teleportEnd();\n    }\n    //传送至指定地点\n    teleportEnd() {\n        audioManager.playAudio(audioName.BlinkEnd);\n        let x = 0;\n        if (GameManager.instance.player.x < 350) {\n            x = GameManager.instance.player.x + caijiTools.random_int(400, cc.winSize.width / 1.6);\n        } else if (GameManager.instance.player.x > 1150) {\n            x = GameManager.instance.player.x - caijiTools.random_int(400, cc.winSize.width / 1.5);\n        } else {\n            let random = caijiTools.random_int(1, 10);\n            x = random % 2 == 0 ?\n                GameManager.instance.player.x + caijiTools.random_int(-cc.winSize.width / 1.6, -400) :\n                GameManager.instance.player.x + caijiTools.random_int(400, cc.winSize.width / 1.5);\n        }\n        this.node.x = x;\n        this.createTPFX();\n        this.enemyAnimation.changeState(enemyState.blink_end, 1, false, true);\n    }\n    //TPFX\n    createTPFX() {\n        let fx = cc.instantiate(this.tpFx_start);\n        fx.setParent(this.node.parent);\n        fx.setSiblingIndex(this.node.getSiblingIndex() + 1);\n        fx.setPosition(this.node.x, this.node.y + this.damageLabelOffsetY);\n        fx.active = true;\n    }\n    //生成旗帜\n    FX_flag() {\n        let flag = cc.instantiate(this.flag_prefab);\n        flag.setParent(this.node.parent);\n        flag.setSiblingIndex(this.node.getSiblingIndex());\n        flag.setPosition(GameManager.instance.player.x, -162);\n        flag.active = true;\n    }\n    //溜溜球\n    FX_thunder_jolt() {\n        let jolt = cc.instantiate(this.thunder_jolt_prefab);\n        jolt.setParent(this.node.parent);\n        jolt.setSiblingIndex(GameManager.instance.player.getSiblingIndex() + 1);\n        jolt.getComponent(thunder_jolt).damage = this.damage;\n        let x = this.skeleton.node.scaleX > 0 ? this.node.x - 140 : this.node.x + 140;\n        let y = this.node.y + 130;\n        jolt.setPosition(x, y);\n        jolt.active = true;\n        let forceX = this.skeleton.node.scaleX > 0 ? -50000 : 50000;\n        let forceY = Math.abs(forceX * 3);\n        jolt.getComponent(cc.RigidBody).applyForceToCenter(cc.v2(forceX, forceY), true);\n    }\n    //定点雷球\n    FX_thunerBall_pos() {\n        let thunder = cc.instantiate(this.thunder_one_prefab);\n        thunder.setParent(this.node.parent);\n        thunder.setSiblingIndex(GameManager.instance.player.getSiblingIndex() + 1);\n        thunder.setPosition(GameManager.instance.player.x, this.node.y + 60);\n        thunder.getComponent(thunder_chase).damage = this.damage / 4;\n        thunder.active = true;\n    }\n    //扩散雷球 前摇\n    FX_thunder_stormBurst1() {\n        let burst = cc.instantiate(this.thunder_many_prefab1);\n        burst.setParent(this.node.parent);  \n        burst.setSiblingIndex(GameManager.instance.player.getSiblingIndex() + 1);\n        let x = this.skeleton.node.scaleX > 0 ? this.node.x - 140 : this.node.x + 140;\n        let y = this.node.y + 130;\n        burst.setPosition(x,y);\n        burst.active=true;\n        this.scheduleOnce(()=>{\n            burst.children[0].getComponent(cc.ParticleSystem3D).stop();\n            this.FX_thunder_stormBurst2(burst.getSiblingIndex()+1);\n            this.scheduleOnce(()=>{\n                burst.destroy();\n            },1);\n        },0.5);\n    }\n    //扩散雷球 圈状雷球\n    FX_thunder_stormBurst2(index:number) {\n        let burst = cc.instantiate(this.thunder_many_prefab2);\n        burst.setParent(this.node.parent);\n        burst.setSiblingIndex(index);\n        let x = this.skeleton.node.scaleX > 0 ? this.node.x - 140 : this.node.x + 140;\n        let y = this.node.y + 130;\n        burst.setPosition(x,y);\n        burst.active=true;\n    }\n    changeDirection() {\n        if (GameManager.instance.player == null) return;\n        this.skeleton.node.scaleX = GameManager.instance.player.x - this.node.x > 0 ? -this.scaleX_skeleton : this.scaleX_skeleton;\n        //this.hpNode.x = this.skeleton.node.scaleX > 0 ? -28 : 28;\n    }\n    laugh() {\n        this.enemyAnimation.changeState(enemyState.laugh, 1, false, true);\n    }\n    die() {\n        this.isDie = true;\n        this.setRigibodySpeed(0, 0);\n        this.changeMovState(false);\n        this.unscheduleAllCallbacks();\n        this.enemyAnimation.changeState(enemyState.die, 1, false, true);\n        this.dieCount();\n    }\n    move() {\n        this.enemyAnimation.changeState(enemyState.Move, 1, true, true);\n    }\n    moveToPlayer() {\n        this.rigibody.linearVelocity = cc.v2(this.nowSpeed, 0);\n    }\n    openWuDi() {\n        this.isWuDi = true;\n    }\n    closeWuDi() {\n        this.isWuDi = false;\n    }\n\n    //脚步\n    footStep() {\n    }\n    beHit(damage: number, dmgType: attackType) {\n        if (this.isDie || this.isWuDi) return;\n        // let isContinue = this.checkIsSwordRain(dmgType);//设置剑雨攻击间隔\n        // if (isContinue == 0) return;\n        this.changeState_beHit(dmgType);\n        let x = this.skeleton.node.scaleX > 0 ? this.node.x + this.damageLabelOffsetX : this.node.x - this.damageLabelOffsetX;\n        let y = this.node.y + this.damageLabelOffsetY;\n        this.highLight();\n        Events.instance.showDamageLabel_enemy(this.node, damage, cc.v2(x, y));\n        this.updateHp(damage);\n        if (this.hp <= 0) {\n            Events.instance.createEnemyDieEffect(this.node, this.dieEffectName, cc.v2(x, y));\n        }\n    }\n    hit(damage: number) {\n        if (this.dmgCollider != damageCollider.laser) {\n            this.getDamageCollider().getComponent(enemyHitCollider).hit(this.node, damage);\n        }\n    }\n    laserHit() {\n        if (this.dmgCollider != damageCollider.laser) return;\n        this.getDamageCollider().getComponent(E39Laser).laserCollider.getComponent(enemyHitCollider).hit(this.node, this.damage);\n        this.hideDamageCollider();\n    }\n    updateHp(damage: number) {\n        this.hp -= damage;\n        uiManager.ins.bossHp.addHp(-damage);\n        if (this.hp <= 0) {\n            this.hp = 0;\n            this.die();\n        }\n    }\n    setRigibodySpeed(x: number, y: number = 0) {\n        this.rigibody.linearVelocity = cc.v2(x, y);\n    }\n    changeState_beHit(dmgType: attackType) {\n        if (this.isSuperArmor) return;\n        let state = null;\n        let isKnockDown = dmgType == attackType.attack3 ? true : false;\n        switch (dmgType) {\n            case attackType.attack1:\n                state = enemyState.get_hurt2;\n                this.applyForce(cc.v2(GameManager.instance.player.x > this.node.x ? -this.beHitForce_x : this.beHitForce_x, 0));\n                break;\n            case attackType.attack2:\n                state = enemyState.get_hurt1;\n                this.applyForce(cc.v2(GameManager.instance.player.x > this.node.x ? -this.beHitForce_x : this.beHitForce_x, 0));\n                break;\n            case attackType.attack3:\n                this.setLinearDamping(0);\n                this.scheduleOnce(() => {\n                    this.setLinearDamping(5);\n                }, 0.4);\n                state = enemyState.knock_down;\n                if (this.node.x < GameManager.instance.player.x && GameManager.instance.playerController.skeleton.node.scaleX < 0) {\n                    this.applyForce(cc.v2(-this.beHitForce_x_attack3, this.beHitForce_y_attack3));\n                } else if (this.node.x > GameManager.instance.player.x && GameManager.instance.playerController.skeleton.node.scaleX > 0) {\n                    this.applyForce(cc.v2(this.beHitForce_x_attack3, this.beHitForce_y_attack3));\n                }\n                break;\n            case attackType.jumpHit:\n                state = enemyState.get_hurt1;\n                this.applyForce(cc.v2(GameManager.instance.player.x > this.node.x ? -this.beHitForce_x : this.beHitForce_x, 0));\n                break;\n            case attackType.shuriken:\n                state = enemyState.get_hurt1;\n                this.applyForce(cc.v2(GameManager.instance.player.x > this.node.x ? -this.beHitForce_x : this.beHitForce_x,\n                    this.beHitForce_y_shuriken));\n                break;\n            case attackType.swordRain:\n                state = enemyState.get_hurt1;\n                break;\n            default:\n        }\n        this.enemyAnimation.changeState(state, 1, false, isKnockDown);\n    }\n    setLinearDamping(damping: number) {\n        this.rigibody.linearDamping = damping;\n    }\n    setFriction(friction: number = 0) {\n        this.boxCollider.friction = friction;\n        this.boxCollider.apply();\n    }\n    applyForce(force: cc.Vec2) {\n        if (this.isSuperArmor) return;\n        this.rigibody.applyForceToCenter(force, true);\n    }\n    checkIsSwordRain(dmgType: attackType) {\n        if (dmgType == attackType.swordRain) {\n            if (this.isSwordRainCd) return 0;\n            this.isSwordRainCd = true;\n            this.scheduleOnce(() => {\n                this.isSwordRainCd = false;\n            }, this.swordRainHitCd);\n        }\n        return 1;\n    }\n    highLightAction() {\n        if (this.isHighLight) {\n            this.skeleton.getMaterial(0).setProperty(\"highLightColor\", [1.0, 1.0, 1.0, this.highLight_A.a]);\n        }\n    }\n    highLight() {\n        if (this.isHighLight) return;\n        this.isHighLight = true;\n        this.skeleton.getMaterial(0).setProperty(\"beHit\", 1);\n        this.skeleton.getMaterial(0).setProperty(\"highLightColor\", [1.0, 1.0, 1.0, 0.5]);\n        cc.tween(this.highLight_A)\n            .to(0.1, { a: 0 })\n            .call(() => {\n                this.closeHighLight();\n            })\n            .start();\n    }\n    closeHighLight() {\n        this.isHighLight = false;\n        this.highLight_A.a = 0.5;\n        this.skeleton.getMaterial(0).setProperty(\"beHit\", 0);\n    }\n    getDistanceX() {\n        return Math.abs(this.node.x - GameManager.instance.player.x);\n    }\n}\n"]}