{"version":3,"sources":["assets\\scripts\\main\\mainMenu.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { Export } from \"../../syyx_sdk/export_sdk\";\nimport { syyx_sdk_api } from \"../../syyx_sdk/syyx_sdk_api\";\nimport Msg from \"../Msg\";\nimport UIPrivacy from \"../UIPrivacy\";\nimport { audioName } from \"../audioNameMgr\";\nimport { caijiTools } from \"../caijiTools\";\nimport uiManager from \"../game/ui/uiManager\";\nimport { ad } from \"../sdk/ad\";\nimport { data } from \"../sdk/data\";\nimport { uiName } from \"../uiBase\";\nimport UISign from \"./UiSign\";\nimport audioManager from \"./audioManager\";\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class mainMenu extends cc.Component {\n\n    @property(cc.Node)\n    mask_go:cc.Node=null;\n    @property(cc.Node)\n    mask_enter:cc.Node=null;\n    @property(cc.Label)\n    coinLabel:cc.Label=null;\n    @property(cc.Node)\n    BtnDesktop:cc.Node = null\n\n    static ins:mainMenu=null;\n    onLoad () {\n        mainMenu.ins=this;\n    }\n\n    start () {\n        this.init();\n    }\n    init(){\n        this.maskAction_enter();\n        this.updateCoin(this.coinLabel);\n\n        // this.checkTodayDate()\n\n        this.onNewBackHomeClick = true\n        mainMenu.native_have_show = false\n\n        if (data.getPrivacyOn()) {\n            this.showOnece()\n        } else {\n            UIPrivacy.ShowPanel(() => {\n                this.showOnece()\n            })\n        }\n       \n        mainMenu.isCkeck(this.BtnDesktop)\n\n    }\n\n    showPrivacy(){\n        UIPrivacy.ShowPanel()\n    }\n\n    maskAction_go(){\n        this.mask_go.x=cc.winSize.width/2;\n        this.mask_go.width=cc.winSize.width+1064;\n        this.mask_go.active=true;\n        let offsetX=this.mask_go.scaleX*this.mask_go.width;\n        cc.tween(this.mask_go)\n        .by(0.6,{x:-offsetX})\n        .call(()=>{\n            cc.director.loadScene(\"game\");\n        })\n        .start()\n    }\n    maskAction_enter(){\n        this.mask_enter.x=-cc.winSize.width/2;\n        this.mask_enter.width=cc.winSize.width+1064;\n        this.mask_enter.active=true;\n        let offsetX=this.mask_enter.scaleX*this.mask_enter.width;\n        cc.tween(this.mask_enter)\n        .by(0.6,{x:offsetX})\n        .start()\n    }\n    async openUpgradePanel(){\n        let popup=await caijiTools.showPopup(uiName.upgradePanel,this.node);\n        popup.setSiblingIndex(this.node.childrenCount-3);\n    }\n    async openSignInPanel(){\n        // let popup=await caijiTools.showPopup(uiName.signInPanel,this.node);\n\t\t// if(popup)\n        // {popup.setSiblingIndex(this.node.childrenCount-3);}\n\n        Export.hide_naive_YSAD('YSBN') // 隐藏原生广告 传'YSBN'，意思是同时会预加载YSBN\n        \n        UISign.ShowPanel(()=>{\n            this.updateCoin(this.coinLabel);\n            mainMenu.showAd()\n        })\n    }\n    async choseLevel(){\n        let popup=await caijiTools.showPopup(uiName.choseLevelPanel,this.node);\n        popup.setSiblingIndex(this.node.childrenCount-3);\n    }\n    substartGame(){\n        this.maskAction_go();\n        let levelUnlock=data.getCache<number[]>(\"levelUnlock\");\n        for(let i=0;i<levelUnlock.length;i++){\n            if(levelUnlock[i]==0){\n                if(i>=16){\n                    data.updateCache(\"Base\",\"choseLevel\",15);\n                }else{\n                    data.updateCache(\"Base\",\"choseLevel\",i);\n                }\n                break;\n            }\n        }\n    }\n\n    static native_have_show: boolean = false;  // 原生结算展示\n    onNewBackHomeClick: boolean = true;\n    startGame() {        \n        if (this.onNewBackHomeClick && mainMenu.native_have_show) {\n            this.onNewBackHomeClick = false\n            Export.click_native_YSAD(\"YSBN\") // 触发ysjs\n        } else { // 否则回到游戏\n            this.onNewBackHomeClick = true\n            mainMenu.native_have_show = false\n            Export.hide_naive_YSAD('YSBN') // 隐藏原生广告\n            cc.log(\"-----------开始游戏-------------\");\n            this.substartGame()\n        }\n    }\n\n    updateCoin(coinLabel:cc.Label){\n        let coin=Number(data.getCache(\"Base\",\"coin\"));\n        if(coin>=1000){\n            coinLabel.string=(coin/1000).toFixed(1)+\"k\";\n        }else{\n            coinLabel.string=coin.toString();\n        }\n    }\n    watchAdGetCoin(){\n        // audioManager.pauseBgGame()\n        ad.video_show().then(isok=>{\n            // audioManager.playBgGame()\n            if(isok){\n                audioManager.playAudio(audioName.getCoin);\n                let coin=Number(data.getCache(\"Base\",\"coin\"))+500;\n                data.updateCache(\"Base\",\"coin\",coin);\n                this.updateCoin(this.coinLabel);\n            }\n        });\n    }\n    checkTodayDate() {\n        let timeDate = new Date();\n        let maxPower=12;\n        if (timeDate.toLocaleDateString() != data.getCache(\"Base\",\"todayDate\")) {\n            if (Number(data.getCache(\"Base\",\"power\")) <maxPower) {\n\n            }\n            data.updateCache(\"Base\",\"todayDate\",timeDate.toLocaleDateString());\n            data.updateCache(\"Base\",\"isGetDailyReward\",0);//是否已领签到奖励\n            data.updateCache(\"Base\",\"isGetLoginReward\",0);//是否已领登录奖励\n            let loginDays=Number(data.getCache(\"Base\",\"loginDays\"));\n            if (loginDays >= 7){\n                loginDays = 0\n            }\n            data.updateCache(\"Base\",\"loginDays\",loginDays);//登录天数            \n            this.checkHadSign();\n        }else{\n            this.checkHadSign();\n        }\n    }\n    checkHadSign() {\n        if (Number(data.getCache(\"Base\",\"isGetDailyReward\")) == 0) {\n            this.openSignInPanel();\n        }\n    }\n\n    /**判断是否可以签到 */\n    private _checkCanBonus() {\n        var isReward = Number(data.getCache(\"Base\",\"isGetDailyReward\"))\n        cc.log(\"_checkCanBonus isReward:\",isReward)\n        if (isReward == 0) {            \n            return true\n        }\n        return false\n    }\n\n    \n    public static showAd() {\n        // let ad:cc.Node = cc.find(\"Canvas/UiHome/fail_parent\")\n        // if (cc.winSize.height > 2000){\n        //     ad.setScale(0.7)\n        // }else{\n        //     ad.setScale(0.6)\n        // }\n        setTimeout(() => {\n            Export.show_native_YSAD(\"10304001\", \"Canvas/fail_parent\", () => { mainMenu.native_have_show = true })    \n        }, 400);        \n    }\n    private showOnece() {        \n        if (data.getSignOnceOn() == false && this._checkCanBonus()) {\n            UISign.ShowPanel(()=>{\n                this.updateCoin(this.coinLabel);\n                mainMenu.showAd()\n            })\n            data.setSignOnceOn(true)\n        } else {\n            mainMenu.showAd()\n        }\n    }\n\n    /**\n     * 游戏开始时，调用isCkeck，isCkeck是检查是否添加到桌面了，\n     * @param node 这是游戏页面的 添加桌面 按钮，要传入节点\n     * can_add 可以添加到桌面，所以 添加桌面 按钮要显示\n     * has_add 已经添加到桌面，所以 添加桌面 按钮要隐藏\n     */\n    static isCkeck(node?: cc.Node) {\n        if (node) {\n            let can_add = () => {\n                node.active = true;\n                // node.on(cc.Node.EventType.TOUCH_END, () => {\n                //     mainMenu.addDesktop(node); // 是下面的addDesktop方法，照搬即可，注意参数node，node就是 添加桌面 按钮节点\n                // })\n            }\n            let has_add = () => {\n                node.active = false;\n            }\n            syyx_sdk_api.check_is_add_desktop(can_add, has_add);\n        }\n    }\n\n    private show_game_portal_box() {\n        syyx_sdk_api.show_game_portal_box(\"10600003\", null, null, null, () => {\n            Msg.Show(\"请勿频繁点击\")\n        })\n    }\n\n    showDesktop(){\n        mainMenu.addDesktop(this.BtnDesktop)\n    }\n    /**\n    * 打开添加桌面按钮\n    */\n    static addDesktop(node) {\n        let on_success = () => {\n            syyx_sdk_api.check_is_add_desktop(\n                () => {\n                    console.log(\"点击了取消添加桌面图标\");\n                },\n                () => {\n                    node.active = false;\n                    console.log(\"添加桌面图标成功\");\n                })\n\n        }\n        let on_failed = () => {\n            console.log(\"不能添加桌面\")\n            Msg.Show(\"请勿频繁点击\")\n        }\n        let on_failed_back = () => {\n            console.log(\"弹出添加桌面失败\")\n            Msg.Show(\"请勿频繁点击\")\n        }\n        let has_create = () => {\n            node.active = false;\n        }\n\n        let can_add = () => {\n            syyx_sdk_api.add_desktop(on_success, on_failed, on_failed_back, has_create)\n        }\n        let has_add = () => {\n            node.active = false;\n        }\n        syyx_sdk_api.check_is_add_desktop(can_add, has_add);\n    }\n\n}\n"]}