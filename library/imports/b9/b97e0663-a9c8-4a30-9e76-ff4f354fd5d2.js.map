{"version":3,"sources":["assets\\syyx_sdk\\controller\\ad\\ad_banner.ts"],"names":[],"mappings":";;;;;;;AAAC,+DAAwD;AACzD,6DAA4D;AAC5D,gDAA+C;AAC/C,iEAA2D;AAC3D,uDAAsD;AACtD,mDAAkD;AAElD;IAAA;IAuVA,CAAC;IA5RG;;OAEG;IACI,8BAAoB,GAA3B;QACI,IAAI,IAAI,GAAG,IAAI,CAAA;QAEf,IAAI,4BAAU,CAAC,gBAAgB,IAAI,GAAG,CAAC,cAAc,CAAC,OAAO,EAAE;YAC3D,IAAI,eAAe,GAAG,CAAC,CAAA;YACvB,IAAI,CAAC,qBAAqB,GAAG,2BAAY,CAAC,mBAAmB,EAAE,CAAA;YAC/D,IAAI,IAAI,CAAC,qBAAqB,IAAI,IAAI,CAAC,qBAAqB,CAAC,eAAe,CAAC,EAAE;gBAC3E,eAAe,GAAG,IAAI,CAAC,qBAAqB,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;gBACtE,IAAI,CAAC,cAAc,GAAG,eAAe,IAAI,CAAC,CAAA;gBAC1C,OAAO,CAAC,GAAG,CAAC,qCAAqC,EAAE,eAAe,CAAC,CAAA;aACtE;YACD,IAAI,CAAC,qBAAqB,IAAI,YAAY,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAA;YACtE,IAAI,CAAC,qBAAqB,GAAG,UAAU,CAAC;gBACpC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAA;gBAC1B,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,EAAE;oBAClC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,EACpF,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAA;iBAC7E;YACL,CAAC,EAAE,eAAe,GAAG,IAAI,CAAC,CAAA;SAC7B;IAEL,CAAC;IAED;;OAEG;IACI,mBAAS,GAAhB;QACI,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACpB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAA;YACxB,IAAI,CAAC,UAAU,EAAE,CAAA;SACpB;IACL,CAAC;IAGM,oBAAU,GAAjB;QACI,IAAI,IAAI,GAAG,IAAI,CAAA;QACf,IAAI,CAAC,qBAAqB,GAAG,2BAAY,CAAC,mBAAmB,EAAE,CAAA;QAC/D,IAAI,IAAI,CAAC,qBAAqB,IAAI,IAAI,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,EAAE;YAC9E,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,qBAAqB,CAAC,kBAAkB,CAAC,CAAC,KAAK,CAAA;SAC7E;QACD,IAAI,CAAC,kBAAkB,EAAE,CAAA;QACzB,IAAI,EAAE,GAAG,+BAAc,CAAC,iBAAiB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAA;QAC9D,OAAO,CAAC,GAAG,CAAC,0CAA0C,EAAE,EAAE,CAAC,CAAA;QAE3D,IAAI,CAAC,QAAQ,IAAI,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;QAC5C,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;YACvB,IAAI,CAAC,UAAU,EAAE,CAAA;QACrB,CAAC,EAAE,EAAE,GAAG,IAAI,CAAC,CAAA;IACjB,CAAC;IACD;;OAEG;IACI,qBAAW,GAAlB,UAAmB,OAAuB,EAAE,SAAkB,EAAE,MAAiB,EAAE,MAAiB,EAAE,OAAkB,EAAE,OAAkB;QACxI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAA;QACrB,IAAI,CAAC,iBAAiB,GAAG,SAAS,CAAA;QAClC,IAAI,CAAC,iBAAiB,GAAG,mCAAgB,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC,SAAS,CAAA;QAE/E,IAAI,CAAC,SAAS,GAAG;YACb,OAAO,EAAE,OAAO;YAChB,SAAS,EAAE,SAAS;YACpB,MAAM,EAAE,MAAM;YACd,MAAM,EAAE,MAAM;YACd,OAAO,EAAE,OAAO;YAChB,OAAO,EAAE,OAAO;SACnB,CAAA;QACD,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YACtB,OAAO,CAAC,GAAG,CAAC,qCAAqC,CAAC,CAAA;YAClD,OAAM;SACT;QAED,IAAI,mCAAgB,CAAC,uBAAuB,EAAE,EAAE;YAC5C,+BAAc,CAAC,WAAW,CAAC,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC,CAAA;YAChF,OAAM;SACT;QACD,eAAe;QACf,IAAI,KAAK,GAAG,mCAAgB,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAA;QACzD,IAAI,CAAC,KAAK,EAAE;YACR,OAAM;SACT;QAED,IAAI,CAAC,SAAS,EAAE,CAAA;IACpB,CAAC;IAED;;OAEG;IACI,gCAAsB,GAA7B;QACI,OAAO,IAAI,CAAC,SAAS,CAAA;IACzB,CAAC;IAED;;OAEG;IACI,0BAAgB,GAAvB;QACI,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE;YACtE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,EACpF,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAA;SAC7E;aAAM;YACH,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,SAAS,CAAC,MAAM,EAAE,uBAAO,CAAC,WAAW,EAAE,SAAS,EACjE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,CAAA;SACvC;IACL,CAAC;IAED;;;MAGE;IACK,qBAAW,GAAlB;QACI,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;QACtB,IAAI,mCAAgB,CAAC,uBAAuB,EAAE,EAAE;YAC5C,+BAAc,CAAC,WAAW,EAAE,CAAA;YAC5B,OAAM;SACT;QAED,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YACtB,OAAO,CAAC,GAAG,CAAC,qCAAqC,CAAC,CAAA;YAClD,OAAM;SACT;QACD,IAAI,CAAC,YAAY,GAAG,KAAK,CAAA;QACzB,IAAI,CAAC,kBAAkB,EAAE,CAAA;QACzB,IAAI,CAAC,QAAQ,IAAI,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;QAC5C,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAA;IAC7B,CAAC;IAED;;;OAGG;IACI,4BAAkB,GAAzB;QACI,IAAI,IAAI,GAAG,IAAI,CAAA;QAEf,iBAAiB;QACjB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACjB,IAAI,CAAC,WAAW,EAAE,CAAA;YAClB,OAAM;SACT;QAED,gDAAgD;QAChD,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;YACzB,IAAI,CAAC,kBAAkB,EAAE,CAAA;YACzB,OAAM;SACT;IACL,CAAC;IAEM,yBAAe,GAAtB,UAAuB,SAAiB,EAAE,WAAY;QAClD,IAAI,mCAAgB,CAAC,uBAAuB,EAAE,EAAE;YAC5C,+BAAc,CAAC,eAAe,CAAC,SAAS,EAAE,WAAW,CAAC,CAAA;YACtD,OAAM;SACT;IACL,CAAC;IAEM,wBAAc,GAArB,UAAsB,SAAiB,EAAE,WAAW;QAChD,IAAI,mCAAgB,CAAC,uBAAuB,EAAE,EAAE;YAC5C,+BAAc,CAAC,cAAc,CAAC,SAAS,EAAE,WAAW,CAAC,CAAA;YACrD,OAAM;SACT;IACL,CAAC;IAEM,sCAA4B,GAAnC;QACI,IAAI,aAAa,GAAG,CAAC,CAAA;QACrB,IAAI,CAAC,qBAAqB,GAAG,2BAAY,CAAC,mBAAmB,EAAE,CAAA;QAC/D,IAAI,IAAI,CAAC,qBAAqB,IAAI,IAAI,CAAC,qBAAqB,CAAC,6BAA6B,CAAC,EAAE;YACzF,aAAa,GAAG,IAAI,CAAC,qBAAqB,CAAC,6BAA6B,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;SACrF;QACD,OAAO,aAAa,CAAA;IACxB,CAAC;IAEM,kCAAwB,GAA/B;QACI,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAA;IAC9B,CAAC;IAEM,iCAAuB,GAA9B;QACI,IAAI,aAAa,GAAG,IAAI,CAAC,4BAA4B,EAAE,CAAA;QACvD,IAAI,aAAa,GAAG,CAAC,EAAE;YACnB,IAAI,IAAI,CAAC,iBAAiB,IAAI,CAAC,EAAE;gBAC7B,IAAI,CAAC,iBAAiB,EAAE,CAAA;gBACxB,IAAI,IAAI,CAAC,iBAAiB,IAAI,aAAa,EAAE;oBACzC,OAAO,KAAK,CAAA;iBACf;aACJ;SACJ;QAED,IAAI,CAAC,qBAAqB,GAAG,2BAAY,CAAC,mBAAmB,EAAE,CAAA;QAC/D,IAAI,IAAI,CAAC,qBAAqB,IAAI,IAAI,CAAC,qBAAqB,CAAC,4BAA4B,CAAC,EAAE;YACxF,IAAI,IAAI,CAAC,qBAAqB,CAAC,4BAA4B,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;gBACxE,IAAI,GAAG,GAAG,IAAI,CAAC,qBAAqB,CAAC,yBAAyB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;gBACxE,OAAO,IAAI,CAAC,MAAM,EAAE,IAAI,GAAG,CAAA;aAC9B;SACJ;QACD,OAAO,KAAK,CAAA;IAChB,CAAC;IAEM,kCAAwB,GAA/B,UAAgC,KAAK;QACjC,IAAI,mCAAgB,CAAC,uBAAuB,EAAE,EAAE;YAC5C,+BAAc,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAA;SACjD;IACL,CAAC;IAED;;MAEE;IACK,4BAAkB,GAAzB;QACI,IAAI,IAAI,CAAC,qBAAqB,IAAI,IAAI,CAAC,qBAAqB,CAAC,2BAA2B,CAAC,EAAE;YACvF,IAAI,IAAI,CAAC,qBAAqB,CAAC,2BAA2B,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;gBACvE,OAAO,CAAC,GAAG,CAAC,yCAAyC,CAAC,CAAA;gBACtD,OAAM;aACT;SACJ;QACD,sCAAsC;QACtC,IAAI,CAAC,IAAI,CAAC,oBAAoB,IAAI,4BAAU,CAAC,gBAAgB,KAAK,GAAG,CAAC,cAAc,CAAC,OAAO,EAAE;YAC1F,OAAO,CAAC,GAAG,CAAC,gEAAgE,CAAC,CAAA;YAC7E,OAAM;SACT;QACD,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,2BAAY,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,iBAAiB,EAC/D,SAAS,MAAM,CAAC,KAAK,EAAE,GAAG;YACtB,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAA;QACpD,CAAC,EACD,SAAS,MAAM;YACX,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAA;YACjC,2BAA2B;YAC3B,IAAI,IAAI,CAAC,SAAS,EAAE;gBAChB,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAA;aACnD;iBAAM;gBACH,IAAI,CAAC,kBAAkB,EAAE,CAAA;aAC5B;QACL,CAAC,EACD,SAAS,OAAO,CAAC,KAAK,EAAE,GAAG;YACvB,IAAI,CAAC,SAAS,CAAC,OAAO,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAA;QACtD,CAAC,EACD,SAAS,OAAO,CAAC,KAAK,EAAE,GAAG;YACvB,OAAO,CAAC,GAAG,CAAC,sDAAsD,EAAE,GAAG,CAAC,CAAA;YACxE,IAAI,CAAC,SAAS,CAAC,OAAO,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QACjE,CAAC,CACJ,CAAA;IACL,CAAC;IAMM,4BAAkB,GAAzB;QACI,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,IAAI,CAAC,iBAAiB,EAAE;YACxB,0CAA0C;YAC1C,IAAI,IAAI,CAAC,qBAAqB,IAAI,4BAAU,CAAC,gBAAgB,KAAK,GAAG,CAAC,cAAc,CAAC,OAAO,EAAE;gBAC1F,IAAI,CAAC,oBAAoB,GAAG,KAAK,CAAA;gBACjC,IAAI,CAAC,eAAe,IAAI,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,CAAA;gBAC1D,IAAI,CAAC,eAAe,GAAG,UAAU,CAAC;oBAC9B,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAA;gBACpC,CAAC,EAAE,KAAK,CAAC,CAAA;aACZ;YACD,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAA;YAClC,2BAAY,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAA;SACxE;IACL,CAAC;IAED;;OAEG;IACI,6BAAmB,GAA1B;QACI,IAAI,IAAI,GAAG,IAAI,CAAA;QACf,IAAI,IAAI,CAAC,eAAe,EAAE,IAAI,IAAI,CAAC,qBAAqB,IAAI,IAAI,CAAC,qBAAqB,CAAC,4BAA4B,CAAC,EAAE;YAClH,IAAI,mCAAgB,CAAC,uBAAuB,EAAE,EAAE;gBAC5C,+BAAc,CAAC,mBAAmB,EAAE,CAAA;gBACpC,OAAM;aACT;YACD,IAAI,IAAI,CAAC,qBAAqB,CAAC,4BAA4B,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;gBACxE,IAAI,EAAE,GAAG,IAAI,CAAC,qBAAqB,CAAC,4BAA4B,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,EAAE,CAAA;gBAChF,IAAI,CAAC,WAAW,EAAE,CAAA;gBAClB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAA;gBAC3B,UAAU,CAAC;oBACP,IAAI,CAAC,cAAc,GAAG,IAAI,CAAA;gBAC9B,CAAC,EAAE,EAAE,GAAG,IAAI,CAAC,CAAA;aAChB;SACJ;IACL,CAAC;IAEM,yBAAe,GAAtB;QACI,OAAO,4BAAU,CAAC,gBAAgB,KAAK,GAAG,CAAC,cAAc,CAAC,OAAO,IAAI,4BAAU,CAAC,gBAAgB,KAAK,GAAG,CAAC,cAAc,CAAC,OAAO,IAAI,4BAAU,CAAC,gBAAgB,KAAK,GAAG,CAAC,cAAc,CAAC,GAAG,CAAA;IAC7L,CAAC;IApVD;;MAEE;IACK,+BAAqB,GAAG,EAAE,CAAC;IAElC;;OAEG;IACI,2BAAiB,GAAG,SAAS,CAAA;IAEpC;;OAEG;IACI,2BAAiB,GAAG,SAAS,CAAA;IAOpC;;OAEG;IACI,wBAAc,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;IAEhC;;OAEG;IACI,sBAAY,GAAG,KAAK,CAAA;IAE3B;;OAEG;IACI,mBAAS,GAAG,IAAI,CAAA;IAEvB;;OAEG;IACI,wBAAc,GAAG,IAAI,CAAA;IAE5B;;OAEG;IACI,+BAAqB,GAAG,SAAS,CAAA;IAExC;;OAEG;IACI,+BAAqB,GAAG,KAAK,CAAA;IAEpC;;MAEE;IACK,8BAAoB,GAAG,IAAI,CAAA;IAE3B,2BAAiB,GAAG,CAAC,CAAC,CAAA;IA8RjC,gBAAC;CAvVD,AAuVC,IAAA;AAvVY,8BAAS","file":"","sourceRoot":"/","sourcesContent":["﻿import { e_ad_id } from './../../configs/syyx_sdk_enum';\r\nimport { syyx_sdk_utils } from \"../../utils/syyx_sdk_utils\";\r\nimport { syyx_manager } from \"../syyx_manager\";\r\nimport { syyx_const } from \"../../configs/syyx_sdk_config\";\r\nimport { syyx_adv_manager } from \"./syyx_adv_manager\";\r\nimport { ad_oppo_banner } from \"./ad_oppo_banner\";\r\n\r\nexport class ad_banner {\r\n\r\n    /**\r\n    * 远端运营配置\r\n    */\r\n    static _business_config_data = {};\r\n\r\n    /**\r\n     * 配置表原生banner广告Id\r\n     */\r\n    static _native_banner_id = undefined\r\n\r\n    /**\r\n     * 配置表普通banner广告Id\r\n     */\r\n    static _normal_banner_id = undefined\r\n\r\n    /**\r\n    * 创建广告时传入的参数\r\n    */\r\n    static _ad_param\r\n\r\n    /**\r\n     * banner自动刷新时间\r\n     */\r\n    static auto_update_cd = [20, 20]\r\n\r\n    /**\r\n     * 刷新定时器是否开启\r\n     */\r\n    static is_run_timer = false\r\n\r\n    /**\r\n     * 当前是否需要展示banner\r\n     */\r\n    static need_show = true\r\n\r\n    /**\r\n     * 能否显示第一个banner\r\n     */\r\n    static can_show_first = true\r\n\r\n    /**\r\n     * oppo首次展示广告cd回调定时器id\r\n     */\r\n    static first_banner_timer_id = undefined\r\n\r\n    /**\r\n     * 普通Banner是否在显示\r\n     */\r\n    static normal_banner_showing = false\r\n\r\n    /**\r\n    * 能否显示vivo普通Banner\r\n    */\r\n    static can_show_vivo_banner = true\r\n\r\n    static cur_protect_count = -1\r\n\r\n    /**\r\n     * 初始化oppo首次广告cd\r\n     */\r\n    static init_first_banner_cd() {\r\n        let self = this\r\n\r\n        if (syyx_const.syyx_sdk_channel == igc.e_channel_type.oppo_qg) {\r\n            let first_banner_cd = 0\r\n            this._business_config_data = syyx_manager.get_business_config()\r\n            if (this._business_config_data && this._business_config_data[\"adv_banner_cd\"]) {\r\n                first_banner_cd = this._business_config_data[\"adv_banner_cd\"].value[0]\r\n                this.can_show_first = first_banner_cd <= 0\r\n                console.log(\"igc----- the banner's cd in oppo is\", first_banner_cd)\r\n            }\r\n            this.first_banner_timer_id && clearTimeout(this.first_banner_timer_id)\r\n            this.first_banner_timer_id = setTimeout(() => {\r\n                self.can_show_first = true\r\n                if (self.need_show && self._ad_param) {\r\n                    self.show_banner(self._ad_param.ad_type, self._ad_param.ad_pos_id, self._ad_param.onLoad,\r\n                        self._ad_param.onShow, self._ad_param.onClose, self._ad_param.onError)\r\n                }\r\n            }, first_banner_cd * 1000)\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * 自动刷新定时器\r\n     */\r\n    static run_timer() {\r\n        if (!this.is_run_timer) {\r\n            this.is_run_timer = true\r\n            this.timer_func()\r\n        }\r\n    }\r\n\r\n    static timer_id\r\n    static timer_func() {\r\n        let self = this\r\n        this._business_config_data = syyx_manager.get_business_config()\r\n        if (this._business_config_data && this._business_config_data[\"banner_cool_time\"]) {\r\n            this.auto_update_cd = this._business_config_data[\"banner_cool_time\"].value\r\n        }\r\n        this.load_native_banner()\r\n        let cd = syyx_sdk_utils.get_random_number(this.auto_update_cd)\r\n        console.log(\"sdk------ next time to refresh banner is\", cd)\r\n\r\n        this.timer_id && clearTimeout(this.timer_id)\r\n        this.timer_id = setTimeout(() => {\r\n            self.timer_func()\r\n        }, cd * 1000)\r\n    }\r\n    /**\r\n     * UI层要展示普通banner或者原生banner\r\n     */\r\n    static show_banner(ad_type?: igc.e_ad_type, ad_pos_id?: string, onLoad?: Function, onShow?: Function, onClose?: Function, onError?: Function) {\r\n        this.need_show = true\r\n        this._normal_banner_id = ad_pos_id\r\n        this._native_banner_id = syyx_adv_manager._adv_config_data[ad_pos_id].backup_id\r\n\r\n        this._ad_param = {\r\n            ad_type: ad_type,\r\n            ad_pos_id: ad_pos_id,\r\n            onLoad: onLoad,\r\n            onShow: onShow,\r\n            onClose: onClose,\r\n            onError: onError,\r\n        }\r\n        if (!this.can_show_first) {\r\n            console.log(\"igc----- banner is in cooling time \")\r\n            return\r\n        }\r\n\r\n        if (syyx_adv_manager.check_is_open_oppo_rule()) {\r\n            ad_oppo_banner.show_banner(ad_type, ad_pos_id, onLoad, onShow, onClose, onError)\r\n            return\r\n        }\r\n        // 上面条件充足，后面不执行\r\n        let ad_id = syyx_adv_manager.get_channel_ad_id(ad_pos_id)\r\n        if (!ad_id) {\r\n            return\r\n        }\r\n\r\n        this.run_timer()\r\n    }\r\n\r\n    /**\r\n     *  检查当前是否需要展示banner\r\n     */\r\n    static check_need_show_banner() {\r\n        return this.need_show\r\n    }\r\n\r\n    /**\r\n     *  展示banner\r\n     */\r\n    static auto_show_banner() {\r\n        if (this._ad_param && this._ad_param.ad_type && this._ad_param.ad_pos_id) {\r\n            this.show_banner(this._ad_param.ad_type, this._ad_param.ad_pos_id, this._ad_param.onLoad,\r\n                this._ad_param.onShow, this._ad_param.onClose, this._ad_param.onError)\r\n        } else {\r\n            this.show_banner(igc.e_ad_type.banner, e_ad_id.banner_hall, undefined,\r\n                undefined, undefined, undefined)\r\n        }\r\n    }\r\n\r\n    /**\r\n    * ui层要隐藏banner或者原生banner\r\n    * 隐藏后销毁定时器  直到下一次show_banner才会重新启动定时器\r\n    */\r\n    static hide_banner() {\r\n        this.need_show = false\r\n        if (syyx_adv_manager.check_is_open_oppo_rule()) {\r\n            ad_oppo_banner.hide_banner()\r\n            return\r\n        }\r\n\r\n        if (!this.can_show_first) {\r\n            console.log(\"igc----- banner is in cooling time \")\r\n            return\r\n        }\r\n        this.is_run_timer = false\r\n        this.hide_normal_banner()\r\n        this.timer_id && clearTimeout(this.timer_id)\r\n        this.timer_id = undefined\r\n    }\r\n\r\n    /**\r\n     * 加载原生banner数据\r\n     * 会根据不同情况 转去加载普通banner\r\n     */\r\n    static load_native_banner() {\r\n        let self = this\r\n\r\n        //当前不需要展示任何banner\r\n        if (!this.need_show) {\r\n            self.hide_banner()\r\n            return\r\n        }\r\n\r\n        //不是oppo vivo 或者 没有设置原生bannerId 则设置定时器刷新普通banner\r\n        if (!self._native_banner_id) {\r\n            self.show_normal_banner()\r\n            return\r\n        }\r\n    }\r\n\r\n    static report_ad_click(ad_pos_id: string, native_data?) {\r\n        if (syyx_adv_manager.check_is_open_oppo_rule()) {\r\n            ad_oppo_banner.report_ad_click(ad_pos_id, native_data)\r\n            return\r\n        }\r\n    }\r\n\r\n    static report_ad_show(ad_pos_id: string, native_data) {\r\n        if (syyx_adv_manager.check_is_open_oppo_rule()) {\r\n            ad_oppo_banner.report_ad_show(ad_pos_id, native_data)\r\n            return\r\n        }\r\n    }\r\n\r\n    static get_easy_click_protect_count() {\r\n        let protect_count = 0\r\n        this._business_config_data = syyx_manager.get_business_config()\r\n        if (this._business_config_data && this._business_config_data[\"native_banner_click_protect\"]) {\r\n            protect_count = this._business_config_data[\"native_banner_click_protect\"].value[0]\r\n        }\r\n        return protect_count\r\n    }\r\n\r\n    static set_banenr_protect_model() {\r\n        this.cur_protect_count = 0\r\n    }\r\n\r\n    static get_is_easy_click_model() {\r\n        let protect_count = this.get_easy_click_protect_count()\r\n        if (protect_count > 0) {\r\n            if (this.cur_protect_count >= 0) {\r\n                this.cur_protect_count++\r\n                if (this.cur_protect_count <= protect_count) {\r\n                    return false\r\n                }\r\n            }\r\n        }\r\n\r\n        this._business_config_data = syyx_manager.get_business_config()\r\n        if (this._business_config_data && this._business_config_data[\"native_banner_click_switch\"]) {\r\n            if (this._business_config_data[\"native_banner_click_switch\"].value[0] == 1) {\r\n                let pro = this._business_config_data[\"native_banner_click_pro\"].value[0]\r\n                return Math.random() <= pro\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    static set_normal_banner_switch(value) {\r\n        if (syyx_adv_manager.check_is_open_oppo_rule()) {\r\n            ad_oppo_banner.set_normal_banner_switch(value)\r\n        }\r\n    }\r\n\r\n    /**\r\n    * 显示普通banner\r\n    */\r\n    static show_normal_banner() {\r\n        if (this._business_config_data && this._business_config_data[\"show_normal_banner_switch\"]) {\r\n            if (this._business_config_data[\"show_normal_banner_switch\"].value[0] == 0) {\r\n                console.log(\"igc ----- normal banner switch is close\")\r\n                return\r\n            }\r\n        }\r\n        //vivo渠道限制一下  销毁banner10s后才能展示普通banner\r\n        if (!this.can_show_vivo_banner && syyx_const.syyx_sdk_channel === igc.e_channel_type.vivo_qg) {\r\n            console.log(\"igc----- vivo ad_banner show_normal_banner create too often!!!\")\r\n            return\r\n        }\r\n        let self = this;\r\n        syyx_manager.create_ad(igc.e_ad_type.banner, self._normal_banner_id,\r\n            function onLoad(param, res) {\r\n                self._ad_param.onLoad && self._ad_param.onLoad()\r\n            },\r\n            function onShow() {\r\n                self.normal_banner_showing = true\r\n                //banner展示成功后判断当前能否展示banner\r\n                if (self.need_show) {\r\n                    self._ad_param.onShow && self._ad_param.onShow()\r\n                } else {\r\n                    self.hide_normal_banner()\r\n                }\r\n            },\r\n            function onClose(param, res) {\r\n                self._ad_param.onClose && self._ad_param.onClose()\r\n            },\r\n            function onError(param, err) {\r\n                console.log(\"igc------syyx_adv_manager show_normal_banner onError\", err)\r\n                self._ad_param.onError && self._ad_param.onError(param, err);\r\n            }\r\n        )\r\n    }\r\n\r\n    /**\r\n     * 隐藏普通banner\r\n     */\r\n    static banner_timer_id\r\n    static hide_normal_banner() {\r\n        let self = this;\r\n        if (self._normal_banner_id) {\r\n            //vivo渠道下  普通banner已经在显示  销毁的话记录10s内不能再次创建\r\n            if (self.normal_banner_showing && syyx_const.syyx_sdk_channel === igc.e_channel_type.vivo_qg) {\r\n                self.can_show_vivo_banner = false\r\n                this.banner_timer_id && clearTimeout(this.banner_timer_id)\r\n                this.banner_timer_id = setTimeout(() => {\r\n                    self.can_show_vivo_banner = true\r\n                }, 11000)\r\n            }\r\n            self.normal_banner_showing = false\r\n            syyx_manager.destroy_ad(igc.e_ad_type.banner, self._normal_banner_id)\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 玩家手动点击了关闭banner\r\n     */\r\n    static finger_close_banner() {\r\n        let self = this\r\n        if (this.is_oppo_vivo_hw() && this._business_config_data && this._business_config_data[\"finger_close_banner_switch\"]) {\r\n            if (syyx_adv_manager.check_is_open_oppo_rule()) {\r\n                ad_oppo_banner.finger_close_banner()\r\n                return\r\n            }\r\n            if (this._business_config_data[\"finger_close_banner_switch\"].value[0] == 1) {\r\n                let cd = this._business_config_data[\"finger_close_banner_switch\"].value[1] || 60\r\n                this.hide_banner()\r\n                this.can_show_first = false\r\n                setTimeout(function () {\r\n                    self.can_show_first = true\r\n                }, cd * 1000)\r\n            }\r\n        }\r\n    }\r\n\r\n    static is_oppo_vivo_hw() {\r\n        return syyx_const.syyx_sdk_channel === igc.e_channel_type.oppo_qg || syyx_const.syyx_sdk_channel === igc.e_channel_type.vivo_qg || syyx_const.syyx_sdk_channel === igc.e_channel_type.web\r\n    }\r\n}\r\n\r\n\r\n"]}