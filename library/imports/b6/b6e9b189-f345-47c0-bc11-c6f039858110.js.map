{"version":3,"sources":["assets\\syyx_sdk\\syyx_ui\\ctr_test\\syyx_ui_ctr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { syyx_ctr_manager } from \"../../controller/ctr_test/syyx_ctr_manager\";\r\nimport { syyx_sdk_api } from \"../../syyx_sdk_api\";\r\nimport { syyx_sdk_utils } from \"../../utils/syyx_sdk_utils\";\r\nimport syyx_ui_ctr_item from \"./syyx_ui_ctr_item\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class syyx_ui_ctr extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    game_node: cc.Node = null;\r\n\r\n    @property(cc.Prefab)\r\n    icon_prefab: cc.Prefab = null;\r\n\r\n    @property(cc.Node)\r\n    icon_layout: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    fly_ani_node: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    tip_title1: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    tip_title2: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    icon_tips: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    thanks_node: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    btn_close: cc.Node = null;\r\n\r\n    call_back = undefined\r\n\r\n    item_list = []\r\n\r\n    constructor() {\r\n        super()\r\n    }\r\n\r\n    show(call_back?) {\r\n        if (this.node && !this.node.parent) {\r\n            let order = syyx_sdk_utils.get_largest_zorder() // 32767\r\n            this.node.parent = syyx_sdk_utils.get_stage() // return了这个 window[\"cc\"].director.getScene()\r\n            this.node.zIndex = order\r\n            this.call_back = call_back\r\n            this.on_show()\r\n        }\r\n    }\r\n\r\n    on_show() {\r\n        let self = this\r\n        this.btn_close.on(cc.Node.EventType.TOUCH_END, this.on_click_close, this)\r\n\r\n        //开场动画\r\n        this.game_node.getComponent(cc.Animation).play(\"chuchang\")\r\n        this.tip_title1.active = true\r\n        this.tip_title2.active = false\r\n        this.icon_tips.active = true\r\n        this.thanks_node.active = false\r\n        this.fly_ani_node.active = false\r\n\r\n        this.btn_close.active = false\r\n        let time = syyx_sdk_api.get_business_data_by_key(\"ctr_test_close_button_delay\")[0] // 延迟时间 1\r\n        setTimeout(() => {\r\n            self.btn_close.active = true\r\n        }, time * 1000);\r\n\r\n        let dataList = [{ // 测试新品尝鲜数据\r\n            gc_id: 10894,\r\n            icon: \"https://res.g.llewan.com/storage/common/material/20220316/b56b61168aab00e085119a948dd647f7.png\",\r\n            iconid: 7157,\r\n            label_switch: 1,\r\n            package: \"com.lwhd.wyxjc.nearme.gamecenter\"\r\n        }, {\r\n            gc_id: 10894,\r\n            icon: \"https://res.g.llewan.com/storage/common/material/20220316/b56b61168aab00e085119a948dd647f7.png\",\r\n            iconid: 7157,\r\n            label_switch: 1,\r\n            package: \"com.lwhd.wyxjc.nearme.gamecenter\"\r\n        }, {\r\n            gc_id: 10894,\r\n            icon: \"https://res.g.llewan.com/storage/common/material/20220316/b56b61168aab00e085119a948dd647f7.png\",\r\n            iconid: 7157,\r\n            label_switch: 1,\r\n            package: \"com.lwhd.wyxjc.nearme.gamecenter\"\r\n        }, {\r\n            gc_id: 10894,\r\n            icon: \"https://res.g.llewan.com/storage/common/material/20220316/b56b61168aab00e085119a948dd647f7.png\",\r\n            iconid: 7157,\r\n            label_switch: 1,\r\n            package: \"com.lwhd.wyxjc.nearme.gamecenter\"\r\n        }, {\r\n            gc_id: 10894,\r\n            icon: \"https://res.g.llewan.com/storage/common/material/20220316/b56b61168aab00e085119a948dd647f7.png\",\r\n            iconid: 7157,\r\n            label_switch: 1,\r\n            package: \"com.lwhd.wyxjc.nearme.gamecenter\"\r\n        }, {\r\n            gc_id: 10894,\r\n            icon: \"https://res.g.llewan.com/storage/common/material/20220316/b56b61168aab00e085119a948dd647f7.png\",\r\n            iconid: 7157,\r\n            label_switch: 1,\r\n            package: \"com.lwhd.wyxjc.nearme.gamecenter\"\r\n        }, {\r\n            gc_id: 10894,\r\n            icon: \"https://res.g.llewan.com/storage/common/material/20220316/b56b61168aab00e085119a948dd647f7.png\",\r\n            iconid: 7157,\r\n            label_switch: 1,\r\n            package: \"com.lwhd.wyxjc.nearme.gamecenter\"\r\n        }, {\r\n            gc_id: 10894,\r\n            icon: \"https://res.g.llewan.com/storage/common/material/20220316/b56b61168aab00e085119a948dd647f7.png\",\r\n            iconid: 7157,\r\n            label_switch: 1,\r\n            package: \"com.lwhd.wyxjc.nearme.gamecenter\"\r\n        }, {\r\n            gc_id: 10894,\r\n            icon: \"https://res.g.llewan.com/storage/common/material/20220316/b56b61168aab00e085119a948dd647f7.png\",\r\n            iconid: 7157,\r\n            label_switch: 1,\r\n            package: \"com.lwhd.wyxjc.nearme.gamecenter\"\r\n        }, {\r\n            gc_id: 10894,\r\n            icon: \"https://res.g.llewan.com/storage/common/material/20220316/b56b61168aab00e085119a948dd647f7.png\",\r\n            iconid: 7157,\r\n            label_switch: 1,\r\n            package: \"com.lwhd.wyxjc.nearme.gamecenter\"\r\n        }]\r\n\r\n        let ctr_test_data = syyx_ctr_manager.get_ctr_data().list.slice(0, 6) // 用里面的list \r\n        // let ctr_test_data = dataList.slice(0, 6)\r\n\r\n        if (ctr_test_data) {\r\n\r\n            ctr_test_data.forEach((item, index) => {\r\n                item.name = `第${index+1}款`\r\n            });\r\n\r\n            // let cur_list = syyx_sdk_utils.shuffle(ctr_test_data) // 洗牌函数，随机位置\r\n            // this.refresh(cur_list)\r\n            this.refresh(ctr_test_data)\r\n        }\r\n\r\n    }\r\n\r\n    refresh(apps) {\r\n        this.icon_layout.removeAllChildren();\r\n        if (apps && apps.length > 0) {\r\n            var content = this.icon_layout\r\n            for (var i = 0; i < apps.length; i++) {\r\n                var prefab_item = void 0;\r\n                if (!this.item_list[i]) {\r\n                    prefab_item = cc.instantiate(this.icon_prefab);\r\n                    this.item_list.push(prefab_item);\r\n                } else {\r\n                    prefab_item = this.item_list[i];\r\n                }\r\n                content.addChild(prefab_item);\r\n                prefab_item.getComponent(syyx_ui_ctr_item).refresh(i, apps[i], this.click_game_item.bind(this))\r\n            }\r\n        }\r\n    }\r\n\r\n    click_game_item() {\r\n        let self = this\r\n        if (syyx_ctr_manager.check_is_ctr_test_compelete()) { // 第二次为true，就不需要了\r\n            return\r\n        }\r\n\r\n        let reward_num = syyx_ctr_manager.get_new_products_reward() // 100\r\n        if (reward_num != 0) { // 有奖励时\r\n            // this.fly_ani_node.active = true\r\n            this.fly_ani_node.active = false\r\n            this.fly_ani_node.getComponent(cc.Animation).play(\"feichuanshi\") // 飘金币的动画\r\n            setTimeout(function () {\r\n\r\n                self.tip_title2.active = true\r\n                self.icon_tips.active = false\r\n\r\n                self.thanks_node.active = true\r\n                self.thanks_node.getComponent(cc.Animation).play(\"zi\")\r\n                setTimeout(function () {\r\n                    // self.hide()\r\n                }, 1500)\r\n            }, 1000)\r\n        } else {// 没奖励时\r\n            self.fly_ani_node.active = false\r\n            self.tip_title2.active = true\r\n            self.icon_tips.active = false\r\n\r\n            self.thanks_node.active = true\r\n            self.thanks_node.getComponent(cc.Animation).play(\"zi\")\r\n            setTimeout(function () {\r\n                // self.hide()\r\n            }, 1500)\r\n        }\r\n\r\n        this.call_back && this.call_back(syyx_ctr_manager.get_new_products_reward()) // 100\r\n        syyx_ctr_manager.set_ctr_test_compelete() // 变为true\r\n    }\r\n\r\n\r\n    on_click_close() {\r\n        this.hide()\r\n    }\r\n\r\n    set_default_pos(style) {\r\n\r\n    }\r\n\r\n    set_style_pos(x, y) {\r\n\r\n    }\r\n\r\n    hide() {\r\n        if (this.node && this.node.parent) {\r\n            this.node.parent.removeChild(this.node)\r\n            this.on_hide();\r\n        }\r\n    }\r\n\r\n    on_hide() {\r\n        this.btn_close.off(cc.Node.EventType.TOUCH_END, this.on_click_close, this)\r\n    }\r\n}\r\n"]}