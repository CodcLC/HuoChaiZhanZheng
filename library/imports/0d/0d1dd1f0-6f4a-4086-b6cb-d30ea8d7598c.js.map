{"version":3,"sources":["assets\\scripts\\sdk\\_qq.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { param } from \"./type\";\n\nconst TAG = '_qq.ts';\nclass _qq {\n    private static Instance: _qq;\n    private videoAd: any = null;\n    private bannerAd: any = null;\n    private insertAd: any = null;\n    private appBoxAd: any = null;\n    private videoAdId: string = \"\";\n    private insertAdId: string = \"\";\n    private bannerAdId: string = \"\";\n    private appBoxAdId: string = \"\";\n    private OnVideoCallBackListener: Function = null;\n    private sdkInitEnd: boolean = false;\n    private constructor() {\n        console.log(TAG, 'init platform channel: _qq_play');\n    }\n    static getInstance(): _qq {\n        if (this.Instance == null) {\n            this.Instance = new _qq();\n        }\n        return this.Instance;\n    }\n    initAdParams(param: param) {\n        if (this.sdkInitEnd) {\n            return;\n        }\n        this.sdkInitEnd = true;\n        this.insertAdId = param.insertId;\n        this.bannerAdId = param.bannerId;\n        this.videoAdId = param.videoId;\n        this.appBoxAdId = param.appBoxId;\n        this.initBannerAd();\n    }\n    buttonShare(OnShareCall: Function, Protexture: string | null, desTxt: string | null) {\n        // @ts-ignore\n        _qq.shareAppMessage({\n            title: desTxt,        ///> \"合成小游戏搭配经典像素风格，玩转僵尸大风暴！\"\n            imageUrl: Protexture, ///> \"res/raw-assets/a0/a0100032-933c-4057-a5c4-d8d2bd9f8d0d.png\"\n            query: \"key1=val1\",\n            success(res: any) {\n                OnShareCall(true);\n            },\n            fail(e: any) {\n                OnShareCall(false);\n            }\n        });\n    }\n    initVideoAd() {\n        //@ts-ignore\n        this.videoAd = _qq.createRewardedVideoAd({\n            adUnitId: this.videoAdId\n        });\n        this.videoAd.onError((res: any) => {\n            console.warn(TAG, '激励视频错误:', JSON.stringify(res))\n        })\n        this.videoAd.onLoad((res: any) => {\n            this.videoAd.show();\n        })\n        this.videoAd.load();\n        this.videoAd.onClose((res: any) => {\n            if (res && res.isEnded) {\n                this.OnVideoCallBackListener(true);\n            } else {\n                this.OnVideoCallBackListener(false);\n            }\n        });\n    }\n    initBannerAd() {\n        let info: any = null;\n        //@ts-ignore\n        _qq.getSystemInfo({\n            success(res: any) {\n                info = res;\n                console.log(TAG, res.windowWidth)\n                console.log(TAG, res.windowHeight)\n            }\n        })\n        let targetBannerAdWidth = 150;\n        //@ts-ignore\n        this.bannerAd = _qq.createBannerAd({\n            adUnitId: this.bannerAdId,\n            style: {\n                left: 0,\n                top: info.windowHeight - targetBannerAdWidth,\n                width: targetBannerAdWidth,\n                height: 200\n            }\n        })\n        this.bannerAd.onResize((size: any) => {\n            console.log(\"onResize\", size.width, size.height);\n            // 如果一开始设置的 banner 宽度超过了系统限制，可以在此处加以调整\n            this.bannerAd.style.left = (info.windowWidth - size.width) / 2;\n            this.bannerAd.style.top = info.windowHeight - size.height;\n            //这行是为了在QQ小游戏中能正确显示位置.如果是微信则不需要这句\n            this.bannerAd.style.left = (info.windowWidth - size.width) / 2;\n            this.bannerAd.style.top = info.windowHeight - size.height;\n        });\n        this.bannerAd.onError((e: any) => {\n            console.warn(TAG, 'bannerAd onError!', e)\n        })\n        this.bannerAd.onLoad((res: any) => {\n            console.warn(TAG, 'bannerAd onLoad!', res)\n        });\n    }\n    insertAd_show() {\n        if (this.insertAd != null) {\n            this.insertAd.destroy();\n        }\n        //@ts-ignore\n        this.insertAd = _qq.createInterstitialAd({\n            adUnitId: this.insertAdId\n        });\n        this.insertAd.load().then((res: any) => {\n            this.insertAd.show();\n        });\n        this.insertAd.onError((err: any) => {\n            console.warn(TAG, `插屏广告错误:${JSON.stringify(err)}`);\n        });\n    }\n    creatAppBoxAd() {\n        //@ts-ignore\n        this.appBoxAd = _qq.createAppBox({\n            adUnitId: this.appBoxAdId\n        });\n    }\n    appBoxAdShow() {\n        this.creatAppBoxAd();\n        this.appBoxAd.load().then(() => {\n            this.appBoxAd.show();\n        });\n    }\n    appBoxDestroy() {\n        this.appBoxAd.destroy();\n        this.appBoxAd = null;\n    }\n    videoAd_show(OnVideoCall: Function) {\n        this.OnVideoCallBackListener = OnVideoCall;\n        this.videoAd != null ? this.videoAd.load() : this.initVideoAd();\n    }\n    bannerAd_hide() {\n        this.bannerAd.hide();\n        this.bannerAd.destroy();\n        this.initBannerAd();\n    }\n    bannerAd_show() {\n        this.bannerAd.show().then(() => {\n            console.log(TAG, 'banner广告显示成功!');\n        }).catch((err: any) => {\n            console.warn(TAG, `banner广告组件出现问题:${err}`);\n        });\n    }\n    shakeDevice() {\n        // @ts-ignore\n        _qq.vibrateShort();\n    }\n}\nexport const ch_qq = _qq;"]}