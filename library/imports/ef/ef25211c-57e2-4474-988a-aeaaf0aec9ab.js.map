{"version":3,"sources":["assets\\scripts\\game\\bigSquidController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { audioName } from \"../audioNameMgr\";\nimport { caijiTools } from \"../caijiTools\";\nimport audioManager from \"../main/audioManager\";\nimport { attackType, enemyState } from \"./animationState\";\nimport enemyAnimation from \"./enemyAnimation\";\nimport enemyBase from \"./enemyBase\";\nimport enemyHitCollider from \"./enemyHitCollider\";\nimport Events from \"./Events\";\nimport GameManager from \"./GameManager\";\nimport ladyBugFx from \"./ladyBugFx\";\n\nconst { ccclass, property } = cc._decorator;\nenum damageCollider{\n    attack\n}\n@ccclass\nexport default class bigSquidController extends enemyBase {\n\n    @property({ type: cc.Float, tooltip: \"伤害效果x轴偏移值\" })\n    damageLabelOffsetX: number = 0;\n    @property({ type: cc.Float, tooltip: \"伤害效果y轴偏移值\" })\n    damageLabelOffsetY: number = 0;\n    @property(cc.Node)\n    hpNode: cc.Node = null;\n    @property(cc.ProgressBar)\n    hpBar: cc.ProgressBar = null;\n    @property(cc.String)\n    dieEffectName: string = \"\";\n\n    rushSpeed:number=2000;//冲击速度\n    moveSpeed: number = 350;//移动速度\n    nowSpeed: number = 0;//当前速度\n    AI_interval: number = 0.5;//ai间隔\n    stopDistance:number=250;//停止距离\n    stopDistance_y:number=200;//停止y轴移动距离（200-250）\n    hp: number = 0;\n    hpTimes:number=1;//血量倍数\n    beHitForce_y: number = 0;//手里剑攻击作用力\n    beHitForce_x: number = 0//普通攻击作用力\n    beHitForce_y_shuriken: number = 0//普通攻击作用力\n    beHitForce_x_attack3: number = 0;//被击飞作用力\n    beHitForce_y_attack3: number = 0;//被击飞作用力\n    scaleX_skeleton: number = 0;\n    isDie: boolean = false;\n    skeleton: sp.Skeleton = null;\n    enemyAnimation: enemyAnimation = null;\n    rigibody: cc.RigidBody = null;\n    boxCollider: cc.PhysicsBoxCollider = null;\n    isSwordRainCd: boolean = false;\n    isSuperArmor: boolean = false;//是否霸体\n    isMove: boolean = false;//是否处于移动状态\n    dmgCollider:damageCollider=null;\n    rushDirect:cc.Vec3=null;\n    rushDistance:number=0;\n    rushStartPos:cc.Vec3=null;\n\n    onLoad() {\n        this.skeleton = this.node.children[1].getComponent(sp.Skeleton);\n        this.scaleX_skeleton = Math.abs(this.skeleton.node.scaleX);\n        this.enemyAnimation = this.node.children[1].getComponent(enemyAnimation);\n        this.enemyAnimation.enemyController = this;\n        this.rigibody = this.node.getComponent(cc.RigidBody);\n        this.boxCollider = this.node.getComponent(cc.PhysicsBoxCollider);\n    }\n    start() {\n        this.init();\n        //@ts-ignore\n        //console.log(this.skeleton.skeletonData._skeletonCache.animations);\n/*         this.skeleton.skeletonData._skeletonCache.slots[8].color=cc.color(0,0,0,0);\n        this.skeleton.skeletonData._skeletonCache.slots[8].darkColor=cc.color(0,0,0,0); */\n    }\n    init() {\n        this.initData();\n        this.hp = this.hpMax*this.hpTimes;\n        let x=GameManager.instance.player.x+caijiTools.random_int(-cc.winSize.width/1.3,cc.winSize.width/1.3);\n        let y=cc.winSize.height/2+caijiTools.random_int(30,100);\n        this.node.setPosition(x,y);\n        this.AI_start();\n    }\n    update() {\n        this.checkRushEnd();\n        if (this.isMove == false) return;\n        let distance = this.getDistance();\n        if (Math.abs(distance) < this.stopDistance) {\n            this.rigibody.linearVelocity=cc.v2(0,0);\n            this.changeMovState(false);\n            this.preAttack();\n        } else {\n            if(this.enemyAnimation.state==enemyState.Atk) return;\n            this.moveToPlayer();\n        }\n    }\n    onBeginContact(contact: cc.PhysicsContact, selfCollider: cc.PhysicsCollider, otherCollider: cc.PhysicsCollider) {\n        let other = otherCollider.node;\n        // let worldManifold = contact.getWorldManifold();\n        // let normal = worldManifold.normal;\n        if (other.group == \"ground\") {\n            if(this.enemyAnimation.state==enemyState.Die2){\n                this.rigibody.enabledContactListener=false;\n                this.die_end();\n            }else{\n                this.rushEnd();\n            }\n        }else if(other.group==\"wall\"){\n            contact.disabled=true;\n        }\n    }\n    checkRushEnd(){\n        if(this.enemyAnimation.state==enemyState.Attack){\n            this.rigibody.linearVelocity=cc.v2(this.rushDirect.x*this.rushSpeed,this.rushDirect.y*this.rushSpeed);\n            let moveDistance=this.node.position.sub(this.rushStartPos).len();\n            if(moveDistance>=this.rushDistance){\n                this.rushEnd();\n            }\n        }\n    }\n    showDamageCollider(collider:damageCollider){\n        this.skeleton.node.children[collider].getComponent(enemyHitCollider).enemyControl=this;\n        this.skeleton.node.children[collider].active=true;\n        this.dmgCollider=collider;\n    }\n    getDamageCollider(){\n        return this.skeleton.node.children[this.dmgCollider];\n    }\n    hideDamageCollider(){\n        if(this.dmgCollider==null) return;\n        this.skeleton.node.children[this.dmgCollider].active=false;\n        this.dmgCollider=null;\n    }\n    AI_start() {\n        this.changeDirection();\n        this.stopDistance=caijiTools.random_int(250,400);\n        if(GameManager.instance.playerController.isDie){\n            //玩家已死 停止移动\n            this.scheduleOnce(()=>{\n                this.AI_start();\n            },1);\n            return;\n        }\n        let distance = Math.abs(this.getDistance());\n        if (distance < this.stopDistance+100) {\n            let x=this.skeleton.node.scaleX<0?\n            GameManager.instance.player.x-caijiTools.random_int(200,400):\n            GameManager.instance.player.x+caijiTools.random_int(200,400);\n            let y=GameManager.instance.player.y+caijiTools.random_int(150,300);\n            let distance=cc.v3(x,y).sub(this.node.position).len();\n            cc.tween(this.node)\n            .to(distance/300,{position:cc.v3(x,y)})\n            .call(()=>{\n                let distance = Math.abs(this.getDistance());\n                if (distance > 200 && distance<=400){\n                    this.preAttack();\n                }else{\n                    this.idle();\n                }\n            })\n            .start();\n        } else {\n            this.changeStopDistanceY();\n            this.changeMovState(true);\n        }\n    }\n    AI_stop() {\n        this.idle();\n    }\n    changeStopDistanceY(){\n        this.stopDistance_y=caijiTools.random_int(200,350);\n    }\n    changeMovState(isMove: boolean) {\n        this.isMove = isMove;\n    }\n    idle() {\n        this.skeleton.node.angle=0;\n        this.changeMovState(false);\n        this.setLinearDamping(0);\n        this.setRigibodySpeed(0,0);\n        this.enemyAnimation.changeState(enemyState.Idle, 1, true, true);\n        this.scheduleOnce(() => {\n            this.AI_start();\n        }, this.AI_interval);\n    }\n    changeDirection() {\n        this.skeleton.node.scaleX = GameManager.instance.player.x > this.node.x ? -this.scaleX_skeleton : this.scaleX_skeleton;\n        //this.hpNode.x = this.skeleton.node.scaleX > 0 ? -28 : 28;\n    }\n    die() {\n        if(this.isDie) return;\n        audioManager.playAudio(audioName.E25Die);\n        this.node.children[0].active=false;\n        this.unscheduleAllCallbacks();\n        cc.Tween.stopAllByTarget(this.node);\n        this.closeHighLight();\n        this.isDie = true;\n        this.hideHp();\n        this.enemyAnimation.changeState(enemyState.Die1,1,false);\n        this.dieCount();\n    }\n    die_middle(){\n        this.rigibody.gravityScale=5;\n        this.rigibody.linearVelocity=cc.v2(0,-1000);\n        this.enemyAnimation.changeState(enemyState.Die2,1,false);\n    }\n    die_end(){\n        this.enemyAnimation.changeState(enemyState.Die3,1,false,true);\n    }\n    Destory(){\n        this.node.destroy();\n    }\n    getUp() {\n        this.enemyAnimation.changeState(enemyState.get_up, 1, false, true);\n    }\n    moveToPlayer() {\n        this.changeDirection();\n        let targetPosition=cc.v3(GameManager.instance.player.x,GameManager.instance.player.y+55);\n        let direct=targetPosition.sub(this.node.position).normalizeSelf();\n        this.rigibody.linearVelocity=cc.v2(this.moveSpeed*direct.x,this.moveSpeed*direct.y);\n    }\n    preAttack(){\n        audioManager.playAudio(audioName.E25Attack);\n        let targetPosition=cc.v3(GameManager.instance.player.x,GameManager.instance.player.y+55);\n        this.changeDirection();\n        this.rushDirect=targetPosition.sub(this.node.position).normalizeSelf();;\n        this.enemyAnimation.changeState(enemyState.Pre_Attack, 1, false, true);\n    }\n    rush(){\n        this.rushStartPos=this.node.position;\n        this.rushDistance=this.getDistance()+70;\n        let angle=caijiTools.getAngleDependY(this.rushDirect.x,this.rushDirect.y);\n        if(this.skeleton.node.scaleX>0){\n            this.skeleton.node.angle=-angle-90;\n        }else{\n            this.skeleton.node.angle=-angle+90;\n        }\n        this.enemyAnimation.changeState(enemyState.Attack, 1, false, true);\n        this.node.children[0].active=true;\n        this.showDamageCollider(damageCollider.attack);\n        this.scheduleOnce(()=>{\n        this.node.children[0].getComponent(cc.MotionStreak).color=cc.color(255,255,255,255);\n        },0.05);\n    }\n    rushEnd(){\n        this.hideDamageCollider();\n        this.node.children[0].active=false;\n        this.node.children[0].getComponent(cc.MotionStreak).color=cc.color(255,255,255,0);\n        this.idle();\n    }\n    hit() {\n        this.getDamageCollider().getComponent(enemyHitCollider).hit(this.node,this.damage);\n        this.hideDamageCollider();\n    }\n    fire(trackEntry,event){\n        if(event.data.name==\"Fire\"){\n            this.createFX();\n        }\n    }\n    async createFX(){\n        let x=this.skeleton.node.scaleX>0?this.node.x-40:this.node.x+40;\n        let y=this.node.y-40;\n        let prefab=await caijiTools.loadPrefab(\"prefabs/ladyBugFX\");\n        let effect=caijiTools.createNode(prefab,this.node.parent);\n        effect.setSiblingIndex(this.node.getSiblingIndex()+1);\n        effect.setPosition(x,y);\n        effect.getComponent(ladyBugFx).isRightMove=this.skeleton.node.scaleX>0?false:true;\n        effect.getComponent(ladyBugFx).damage=this.damage;\n        effect.active=true;\n    }\n    beHit(damage: number, dmgType: attackType) {\n        if(this.isDie) return;\n        this.changeMovState(false);\n        this.setRigibodySpeed(0);\n        // let isContinue = this.checkIsSwordRain(dmgType);//设置剑雨攻击间隔\n        // if (isContinue == 0) return;\n        this.highLight();\n        this.showHp();\n        this.changeState_beHit(dmgType);\n        let x = this.node.scaleX < 0 ? this.node.x + this.damageLabelOffsetX : this.node.x - this.damageLabelOffsetX;\n        let y = this.node.y + this.damageLabelOffsetY;\n        Events.instance.showDamageLabel_enemy(this.node, damage, cc.v2(x, y));\n        if (this.hp <= 0) {\n            Events.instance.createEnemyDieEffect(this.node, this.dieEffectName, cc.v2(x, y));\n        }\n        this.updateHp(damage);\n    }\n    setRigibodySpeed(x:number,y:number=0){\n        this.rigibody.linearVelocity=cc.v2(x,y);\n    }\n    changeState_beHit(dmgType: attackType) {\n        if(this.isSuperArmor) return;\n        let state = null;\n        let isKnockDown = dmgType == attackType.attack3 ? true : false;\n        switch (dmgType) {\n            case attackType.attack1:\n                state = enemyState.get_hurt2;\n                this.applyForce(cc.v2(GameManager.instance.player.x > this.node.x ? -this.beHitForce_x : this.beHitForce_x, 0));\n                break;\n            case attackType.attack2:\n                state = enemyState.get_hurt1;\n                this.applyForce(cc.v2(GameManager.instance.player.x > this.node.x ? -this.beHitForce_x : this.beHitForce_x, 0));\n                break;\n            case attackType.attack3:\n                this.setLinearDamping(0);\n                this.scheduleOnce(() => {\n                    this.setLinearDamping(5);\n                }, 0.4);\n                state = enemyState.knock_down;\n                if (this.node.x < GameManager.instance.player.x && GameManager.instance.playerController.skeleton.node.scaleX < 0) {\n                    this.applyForce(cc.v2(-this.beHitForce_x_attack3, this.beHitForce_y_attack3));\n                } else if (this.node.x > GameManager.instance.player.x && GameManager.instance.playerController.skeleton.node.scaleX > 0) {\n                    this.applyForce(cc.v2(this.beHitForce_x_attack3, this.beHitForce_y_attack3));\n                }\n                break;\n            case attackType.jumpHit:\n                state = enemyState.get_hurt1;\n                this.applyForce(cc.v2(GameManager.instance.player.x > this.node.x ? -this.beHitForce_x : this.beHitForce_x, 0));\n                break;\n            case attackType.shuriken:\n                state = enemyState.get_hurt1;\n                this.applyForce(cc.v2(GameManager.instance.player.x > this.node.x ? -this.beHitForce_x : this.beHitForce_x,\n                    this.beHitForce_y_shuriken));\n                break;\n            case attackType.swordRain:\n                state = enemyState.get_hurt1;\n                break;\n            default:\n        }\n        this.enemyAnimation.changeState(state, 1, false, isKnockDown);\n    }\n    setLinearDamping(damping: number) {\n        this.rigibody.linearDamping = damping;\n    }\n    setFriction(friction: number = 0) {\n        this.boxCollider.friction = friction;\n        this.boxCollider.apply();\n    }\n    applyForce(force: cc.Vec2) {\n        if (this.isSuperArmor) return;\n        this.rigibody.applyForceToCenter(force, true);\n    }\n    checkIsSwordRain(dmgType: attackType) {\n        if (dmgType == attackType.swordRain) {\n            if (this.isSwordRainCd) return 0;\n            this.isSwordRainCd = true;\n            this.scheduleOnce(() => {\n                this.isSwordRainCd = false;\n            }, this.swordRainHitCd);\n        }\n        return 1;\n    }\n    updateHp(damage: number) {\n        this.hp -= damage;\n        this.hpBar.progress = this.hp / this.hpMax;\n        if (this.hp <= 0) {\n            this.hp = 0;\n            this.die();\n        }\n    }\n    showHp() {\n        this.unschedule(this.hideHp);\n        this.hpNode.active = true;\n        this.scheduleOnce(this.hideHp,2);\n    }\n    hideHp() {\n        this.hpNode.active = false;\n    }\n    highLight() {\n        this.unschedule(this.closeHighLight);\n        this.skeleton.getMaterial(0).setProperty(\"beHit\", 1);\n        this.skeleton.getMaterial(0).setProperty(\"highLightColor\", [1.0,1.0,1.0,0.5]);\n        this.scheduleOnce(this.closeHighLight, 0.15);\n    }\n    closeHighLight() {\n        this.skeleton.getMaterial(0).setProperty(\"beHit\", 0);\n    }\n    getDistance(){\n        return this.node.position.sub(GameManager.instance.player.position).len();\n    }\n    getDistanceX() {\n        return this.node.x - GameManager.instance.player.x;\n    }\n    getDistanceY(){\n        return Math.abs(this.node.y-GameManager.instance.player.y);\n    }\n}\n"]}