{"version":3,"sources":["assets\\scripts\\main\\levelItem.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAElF,4CAA2C;AAC3C,oCAAmC;AAEnC,uCAAkC;AAG5B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAuC,6BAAY;IAAnD;QAAA,qEAoFC;QAjFG,aAAO,GAAW,IAAI,CAAC;QAEvB,cAAQ,GAAW,IAAI,CAAC;QAGxB,cAAQ,GAAU,IAAI,CAAC;QAEvB,WAAK,GAAQ,CAAC,CAAC;;IA0EnB,CAAC;IAzEG,eAAe;IAEf,yBAAK,GAAL;QACI,IAAI,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC;IACD,wBAAI,GAAJ;QACI,IAAI,CAAC,KAAK,GAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClC,IAAI,QAAQ,GAAC,WAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,KAAK,GAAC,CAAC,CAAC,CAAC;QACxD,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,YAAY,GAAE,QAAQ,CAAC;QACzD,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,MAAM,GAAC,CAAC,QAAQ,CAAC;QAClD,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IACK,+BAAW,GAAjB;;;;;4BAEY,qBAAM,uBAAU,CAAC,eAAe,CAAC,kBAAkB,GAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAA;;wBAAvE,GAAG,GAAC,SAAmE;wBAC3E,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,GAAC,GAAG,CAAC;wBAC5D,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;;;;;KAChD;IAGJ,+BAAW,GAAX,UAAY,GAAG;QACV,IAAI,SAAS,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAA;QAClE,IAAI,IAAI,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAA;QACnC,GAAG,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAA;QACnB,IAAI,MAAM,GAAG,UAAC,IAAI;YAChB,IAAI,MAAM,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,OAAO,EAAE,CAAA;YAChD,IAAI,MAAM,GAAG,EAAE,CAAA;YACf,IAAI,MAAM,GAAG,EAAE,CAAA;YACf,MAAM,CAAC,OAAO,CAAC,UAAC,IAAI,EAAE,KAAK;gBACzB,MAAM,CAAC,OAAO,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAA;YAChF,CAAC,CAAC,CAAA;YACF,IAAI,MAAM,GAAG,EAAE,CAAA;YACf,MAAM,CAAC,OAAO,CAAC,UAAC,CAAC,EAAE,CAAC;gBAClB,IAAI,CAAC,KAAK,GAAG;oBAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;YAC/B,CAAC,CAAC,CAAA;YACF,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;gBACrB,MAAM,CAAC,OAAO,CAAC,UAAC,CAAC,EAAE,CAAC;oBAClB,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;wBACrC,IAAI,CAAC,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE;4BAClC,MAAM,IAAI,CAAC,CAAA;yBACZ;qBACF;yBAAM;wBACL,MAAM,IAAI,CAAC,CAAA;qBACZ;gBACH,CAAC,CAAC,CAAA;aACH;iBAAM;gBACL,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC,CAAA;aACnB;YAED,OAAO,MAAM,CAAA;QACf,CAAC,CAAA;QACD,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,CAAA;QACrC,IAAI,KAAK,GAAG,GAAG,GAAG,KAAK,CAAA;QACvB,qCAAqC;QACrC,wBAAwB;QACxB,IAAI;QACJ,OAAO,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,GAAG,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;IACzE,CAAC;IAIQ,8BAAU,GAAhB;;;;;;wBACQ,IAAI,GAAC,WAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;wBAExC,qBAAM,uBAAU,CAAC,eAAe,CAAC,iBAAiB,GAAC,IAAI,CAAC,EAAA;;wBAA5D,GAAG,GAAC,SAAwD;wBAEhE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,GAAC,GAAG,CAAC;;;;;KACxD;IACD,yBAAK,GAAL,UAAM,KAAc;QAChB,WAAI,CAAC,WAAW,CAAC,MAAM,EAAC,YAAY,EAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrD,kBAAQ,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;IACjC,CAAC;IAhFD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;8CACG;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;+CACI;IAGxB;QADF,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;+CACO;IARN,SAAS;QAD7B,OAAO;OACa,SAAS,CAoF7B;IAAD,gBAAC;CApFD,AAoFC,CApFsC,EAAE,CAAC,SAAS,GAoFlD;kBApFoB,SAAS","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { caijiTools } from \"../caijiTools\";\nimport { data } from \"../sdk/data\";\nimport { bundleName } from \"../uiBase\";\nimport mainMenu from \"./mainMenu\";\n\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class levelItem extends cc.Component {\n\n    @property(cc.Sprite)\n    starSpr:cc.Sprite=null;\n    @property(cc.Sprite)\n    levelSpr:cc.Sprite=null;\n\t\n\t@property(cc.Label)\n    levellab:cc.Label=null;\n\t\n    level:number=0;\n    // onLoad () {}\n\n    start () {\n        this.init();\n    }\n    init(){\n        this.level=Number(this.node.name);\n        let isUnlock=data.getCache(\"levelUnlock\")[this.level-1];\n        this.node.getComponent(cc.Button).interactable= isUnlock;\n        this.node.getChildByName(\"lock\").active=!isUnlock;\n        this.updateLevel();\n        this.updateStar();\n    }\n    async updateLevel(){\n        // let spr=await caijiTools.loadSpriteFrameBundle(bundleName.mainUi,\"choseLevel/level\"+this.node.name);\n        let spr=await caijiTools.loadSpriteFrame(\"choseLevel/level\"+this.node.name);\n        this.levelSpr.getComponent(cc.Sprite).spriteFrame=spr;\n\t\tthis.levellab.string = this.toChinesNum(this.level)\n    }\n\t\n\t\n\ttoChinesNum(num) {\n      let changeNum = ['零', '一', '二', '三', '四', '五', '六', '七', '八', '九']\n      let unit = ['', '十', '百', '千', '万']\n      num = parseInt(num)\n      let getWan = (temp) => {\n        let strArr = temp.toString().split('').reverse()\n        let newNum = ''\n        let newArr = []\n        strArr.forEach((item, index) => {\n          newArr.unshift(item === '0' ? changeNum[item] : changeNum[item] + unit[index])\n        })\n        let numArr = []\n        newArr.forEach((m, n) => {\n          if (m !== '零') numArr.push(n)\n        })\n        if (newArr.length > 1) {\n          newArr.forEach((m, n) => {\n            if (newArr[newArr.length - 1] === '零') {\n              if (n <= numArr[numArr.length - 1]) {\n                newNum += m\n              }\n            } else {\n              newNum += m\n            }\n          })\n        } else {\n          newNum = newArr[0]\n        }\n \n        return newNum\n      }\n      let overWan = Math.floor(num / 10000)\n      let noWan = num % 10000\n      // if (noWan.toString().length < 4) {\n      //   noWan = '0' + noWan\n      // }\n      return overWan ? getWan(overWan) + '万' + getWan(noWan) : getWan(num)\n\t}\n\n\t\n\t\n    async updateStar(){\n        let diff=data.getCache(\"levelStar\")[this.level];\n        // let spr=await caijiTools.loadSpriteFrameBundle(bundleName.mainUi,\"choseLevel/star\"+diff);\n        let spr=await caijiTools.loadSpriteFrame(\"choseLevel/star\"+diff);\n        \n        this.starSpr.getComponent(cc.Sprite).spriteFrame=spr;\n    }\n    chose(event:cc.Event){\n        data.updateCache(\"Base\",\"choseLevel\",this.node.name);\n        mainMenu.ins.maskAction_go();\n    }\n}\n"]}