{"version":3,"sources":["assets\\scripts\\sdk\\_oppo.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Export } from \"../../syyx_sdk/export_sdk\";\nimport { param } from \"./type\";\nconst TAG = '_oppo.ts';\nclass _oppo {\n    private static Instance: _oppo;\n    private bannerId: string = \"\";\n    private videoId: string = \"\";\n    private bannerAd: any = null;\n    private videoAd: any = null;\n    private OnVideoCallBackListener: Function = null;\n    private bannerAd_showNum: number = 20;\n    private sdkInitEnd: boolean = false;\n    private initTime: number = 0;\n    constructor() {\n        console.log(TAG, 'init platform channel: oppo_play');\n    }\n    public static getInstance(): _oppo {\n        if (this.Instance == null) {\n            this.Instance = new _oppo();\n            this.Instance.initTime = new Date().getTime();\n        }\n        return this.Instance;\n    }\n    initAdParams(param: param) {\n        if (this.sdkInitEnd) {\n            return;\n        }\n        this.sdkInitEnd = true;\n        this.bannerId = param.bannerId;\n        this.videoId = param.videoId;\n        this.initVideoAd();\n        this.initBannerAd();\n        ///> 新平台版本号'1051'（minPlatformVersion> ='1051'）已经不再需要进行广告初始化qg.initAdService(object);\n    }\n    initBannerAd() {\n        let self: _oppo = this;\n        //@ts-ignore\n        var bannerAd = qg.createBannerAd({\n            posId: this.bannerId\n        });\n        this.bannerAd = bannerAd;\n        this.bannerAd.onHide(() => {\n            self.bannerAd_showNum -= 1;\n            console.log(TAG, \"banner 广告隐藏!\");\n        });\n        this.bannerAd.onShow(() => {\n            console.log(TAG, \"banner 广告显示!\");\n        });\n        this.bannerAd.onError((err: any) => {\n            switch (err['errCode']) {\n                case 1001:\n                    console.warn(TAG, '1.传参是否有误!');\n                    console.warn(TAG, '2.是否使用了不支持的方法操作!');\n                    console.warn(TAG, '3.不要重复拉取广告，我们制定限制!');\n                    console.warn(TAG, '4.广告资源位是否没有申请!');\n                    break;\n                case 1002:\n                    console.warn(TAG, '广告必须在19/14之后的Android版本上显示，一般是包名错误导致的!');\n                    break;\n                case 1003:\n                    console.warn(TAG, '无广告返回!');\n                    break;\n                case 1004:\n                    console.warn(TAG, '1.OPPO开放平台查看广告是否异常，异常则重新申请!');\n                    console.warn(TAG, '1.检查手机设置的时间是否晚于现在实际的时间，若是，请设置与北京时间相同!');\n                    console.warn(TAG, '1.在包名正确情况下，概率性偏移20003报错属于正常现象，报错与广告填充率/短时间交替拉取广告有关，请上架后前往OPPO广告联盟后台，查看广告数据是否正常（填充率是否正常）；继续拉取广告，是会拉取不到广告，因为我们对拉取频次作了限制!');\n                    break;\n            }\n        });\n    }\n    bannerAd_show() {\n        if (this.bannerAd_showNum <= 0 || new Date().getTime() - this.initTime < 60000) {\n            return;\n        }\n        this.bannerAd.show();\n    }\n    bannerAd_hide() {\n        if (this.bannerAd) {\n            this.bannerAd.hide();\n            this.bannerAd.destroy();\n            this.initBannerAd();\n        }\n    }\n    initVideoAd() {\n        let self: _oppo = this;\n        //@ts-ignore\n        this.videoAd = qg.createRewardedVideoAd({\n            posId: self.videoId\n        });\n        this.videoAd.onLoad(function () {\n            self.videoAd.show();\n        });\n        this.videoAd.onError(function (err: any) {\n            switch (err['errCode']) {\n                case 1001:\n                    console.warn(TAG, '1.传参是否有误!');\n                    console.warn(TAG, '2.是否使用了不支持的方法操作!');\n                    console.warn(TAG, '3.不要重复拉取广告，我们制定限制!');\n                    console.warn(TAG, '4.广告资源位是否没有申请!');\n                    break;\n                case 1002:\n                    console.warn(TAG, '广告必须在19/14之后的Android版本上显示，一般是包名错误导致的!');\n                    break;\n                case 1003:\n                    console.warn(TAG, '无广告返回!');\n                    break;\n                case 1004:\n                    console.warn(TAG, '1.OPPO开放平台查看广告是否异常，异常则重新申请!');\n                    console.warn(TAG, '1.检查手机设置的时间是否晚于现在实际的时间，若是，请设置与北京时间相同!');\n                    console.warn(TAG, '1.在包名正确情况下，概率性偏移20003报错属于正常现象，报错与广告填充率/短时间交替拉取广告有关，请上架后前往OPPO广告联盟后台，查看广告数据是否正常（填充率是否正常）；继续拉取广告，是会拉取不到广告，因为我们对拉取频次作了限制!');\n                    break;\n            }\n            //@ts-ignore\n            qg.showToast({\n                title: '暂时没有视频广告了，请稍后再试！',\n                icon: 'none',\n                duration: 2000\n            });\n        });\n        this.videoAd.onClose((res: any) => {\n            if (res.isEnded) {\n                self.OnVideoCallBackListener(true);\n            } else {\n                self.OnVideoCallBackListener(false);\n            }\n        });\n    }\n    videoAd_show(OnVideoCall: Function) {\n        // this.OnVideoCallBackListener = OnVideoCall;\n        // this.videoAd.load();\n\n        Export.show_video(() => { \n            cc.log('看完视频，需要在此写上放发奖励代码');\n            OnVideoCall && OnVideoCall(true);\n        },()=>{\n            OnVideoCall && OnVideoCall(false);\n        })\n        \n    }\n    _oppoPush(packgeName: string = '') {\n        // @ts-ignore\n        qg.navigateToMiniGame({ pkgName: packgeName });\n    }\n    shakeDevice() {\n        // @ts-ignore\n        qg.vibrateShort({});\n    }\n}\nexport const ch_oppo = _oppo;"]}