{"version":3,"sources":["assets\\syyx_sdk\\controller\\syyx_cc_ui_manager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { syyx_view } from \"../model/model\";\r\nimport { syyx_prefab_path } from \"../configs/syyx_sdk_enum\";\r\nimport { syyx_manager } from \"./syyx_manager\";\r\nimport { syyx_sdk_utils } from \"../utils/syyx_sdk_utils\";\r\nimport syyx_ui_banner from \"../syyx_ui/ad/syyx_ui_banner\";\r\nimport syyx_ui_interstitial from \"../syyx_ui/ad/syyx_ui_interstitial\";\r\nimport syyx_ui_inner_interstitial from \"../syyx_ui/ad/syyx_ui_inner_interstitial\";\r\nimport syyx_ui_native_icon from \"../syyx_ui/ad/syyx_ui_native_icon\";\r\nimport syyx_ui_toast from \"../syyx_ui/ad/syyx_ui_toast\";\r\nimport syyx_ui_ctr from \"../syyx_ui/ctr_test/syyx_ui_ctr\";\r\n\r\n\r\nexport class syyx_cc_ui_manager {\r\n\r\n    static _prefab_view = {}\r\n\r\n    static _prefab_loading_state = {}\r\n\r\n    static _load_call_back_list = {}\r\n\r\n    static load_ui_prefabs(view_type, call_back) {\r\n        let self = this\r\n\r\n        let view = this._prefab_view[view_type]\r\n        if (view && view.node) {\r\n            call_back && call_back(this._prefab_view[view_type])\r\n            return\r\n        }\r\n\r\n        let config = syyx_manager._ui_prefab_config\r\n        \r\n        let view_path = this.get_prefab_path(view_type)\r\n        if (view_path) {\r\n\r\n            if (!this._load_call_back_list[view_type]) {\r\n                this._load_call_back_list[view_type] = []\r\n            }\r\n            this._load_call_back_list[view_type].push(call_back)\r\n\r\n            if (this._prefab_loading_state[view_type]) {\r\n                console.log(\"igc----- syyx_cc_ui_manager prefab is loading , please wait\", view_path)\r\n                return\r\n            }\r\n\r\n            this._prefab_loading_state[view_type] = true\r\n\r\n            syyx_sdk_utils.load_resource(view_path, function (prefab) {\r\n                self._prefab_loading_state[view_type] = false\r\n                let prefab1 = cc.instantiate(prefab)\r\n                let view1 = prefab1.getComponent(self.get_prefab_class(view_type))\r\n                \r\n                self._prefab_view[view_type] = view1\r\n\r\n                if (config && config[view_type].cocos_auto_scale) {\r\n                    syyx_sdk_utils.set_default_scale(view1)\r\n                }\r\n\r\n                for (let i in self._load_call_back_list[view_type]) {\r\n                    //顺序执行call_bcak回调\r\n                    self._load_call_back_list[view_type][i] && self._load_call_back_list[view_type][i](view1)\r\n                }\r\n                self._load_call_back_list[view_type] = []\r\n                console.log(\"igc----- syyx_cc_ui_manmager load prefab\", view_path)\r\n            }, self, function () {\r\n                self._prefab_loading_state[view_type] = false\r\n                console.log(\"igc----- syyx_cc_ui_manmager load prefab failed!!\", view_path)\r\n                self._load_call_back_list[view_type] = []\r\n            })\r\n        }\r\n    }\r\n\r\n    /**\r\n    * 根据viewType获取path\r\n    * @param viewType \r\n    */\r\n    static get_prefab_path(view_type) {\r\n        switch (view_type) {\r\n            case syyx_view.native_banner:\r\n                return syyx_prefab_path.native_banner\r\n            case syyx_view.interstitial:\r\n                if (cc.view.getVisibleSize().height > cc.view.getVisibleSize().width) {\r\n                    return syyx_prefab_path.interstitial\r\n                } else {\r\n                    return syyx_prefab_path.interstitial_h\r\n                }\r\n            case syyx_view.inner_interstitial:\r\n                return syyx_prefab_path.inner_interstitial\r\n            case syyx_view.inner_interstitial_bn:\r\n                return syyx_prefab_path.inner_interstitial_bn\r\n            case syyx_view.native_icon:\r\n                return syyx_prefab_path.native_icon\r\n            case syyx_view.toast:\r\n                return syyx_prefab_path.toast\r\n            case syyx_view.ctr_test:\r\n                if (cc.view.getVisibleSize().height > cc.view.getVisibleSize().width) {\r\n                    return syyx_prefab_path.ctr_test\r\n                } else {\r\n                    return syyx_prefab_path.ctr_test_h\r\n                }\r\n            default:\r\n                console.log(\"igc-----get_prefab_path fail\", view_type);\r\n                return undefined\r\n        }\r\n    }\r\n\r\n    /**\r\n    * 根据viewType获取path\r\n    * @param viewType \r\n    */\r\n    static get_prefab_class(view_type) {\r\n        switch (view_type) {\r\n            case syyx_view.native_banner:\r\n                return syyx_ui_banner\r\n            case syyx_view.interstitial:\r\n                return syyx_ui_interstitial\r\n            case syyx_view.inner_interstitial:\r\n                return syyx_ui_inner_interstitial\r\n                case syyx_view.inner_interstitial_bn:\r\n                    return syyx_ui_inner_interstitial\r\n            case syyx_view.native_icon:\r\n                return syyx_ui_native_icon\r\n            case syyx_view.toast:\r\n                return syyx_ui_toast\r\n            case syyx_view.ctr_test:\r\n                return syyx_ui_ctr\r\n            default:\r\n                console.log(\"igc-----get_prefab_path fail\", view_type);\r\n                return undefined\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n"]}