{"version":3,"sources":["assets\\scripts\\main\\UiSign.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport { Export } from \"../../syyx_sdk/export_sdk\";\nimport Msg from \"../Msg\";\nimport { audioName } from \"../audioNameMgr\";\nimport Constant from \"../sdk/Constant\";\nimport { ad } from \"../sdk/ad\";\nimport { data } from \"../sdk/data\";\nimport audioManager from \"./audioManager\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class UISign extends cc.Component {\n\n    private BackBtn: cc.Node = null;//返回\n    private DoubleBtn: cc.Node = null;//两倍按钮\n    private BtnSign: cc.Node = null;//直接领取\n    /**是否能领取奖励 */\n    private _canBonus: boolean = false;\n    private ScaleNode: cc.Node = null;\n    /**已领取 */\n    private EndSign: cc.Node[] = [];\n\n        /**\n     * 每日签到的金额\n     */\n    public MoneyNum: number[] = [500, 1000, 1500, 2000, 3000, 5000, 10000];\n\n    onLoad() {\n        this._onLoad()\n    }\n\n    private _onLoad() {\n        this.BackBtn = cc.find(\"ScaleNode/BackBtn\", this.node);\n        this.DoubleBtn = cc.find(\"ScaleNode/BtnDouble\", this.node);\n        this.BtnSign = cc.find(\"ScaleNode/BtnSign\", this.node);     \n        this.ScaleNode = cc.find(\"ScaleNode\", this.node);     \n        this._start();\n    }\n\n    private _start() {\n        for (let index = 0; index < 7; index++) {\n            let day: cc.Node = this.ScaleNode.getChildByName(\"SignBtn\" + (index + 1));\n            let not: cc.Node = day.getChildByName(\"dui\");\n            this.EndSign.push(not);\n        }\n        // this.DoubleBtn.on(cc.Node.EventType.TOUCH_END, this.DoubleGet, this);\n        // this.BtnSign.on(cc.Node.EventType.TOUCH_END, this.OneceGet, this);\n        // this.BackBtn.on(cc.Node.EventType.TOUCH_END, this.Back, this);\n        this._updatePanel();\n        this._hideAllSignBtn();\n\n        this.onOpen()\n    }\n\n    public tweeNode(node: cc.Node) {\n        cc.tween(node)\n            .to(0.3, { scale: 1 }, { easing: \"backOut\" })\n            .start();\n    }\n\n    public tweeNodeOut(node: cc.Node, callback: Function = null) {\n        if (!node) {\n            return\n        }\n        node.active = true;\n        let tt = cc.tween(node)\n        tt = tt.to(0.3, { scale: 0 }, { easing: \"backIn\" })\n        if (callback) {\n            tt = tt.call(() => {\n                callback()\n            })\n        }\n        tt.start();\n    }\n\n    //\n    isTurn: boolean = false\n\n    static native_have_show: boolean = false;  // 原生结banner展示\n    protected onOpen() {\n        this.node.scale = 0;\n        this.tweeNode(this.node);\n\n        this.onNewBackHomeClick = true\n        UISign.native_have_show = false\n        setTimeout(() => {\n            Export.show_native_YSAD(\"10304001\", \"Canvas/signPanel/fail_parent\", () => { UISign.native_have_show = true })\n        }, 400);\n        this._checkCanBonus();\n        if (this._canBonus == false) {\n            this.BackBtn.active = true\n        } else {\n            this.BackBtn.active = false\n        }\n    }\n\n    /**\n     * 2倍领取\n     */\n     DoubleGet() {\n        // audioManager.playAudio(audioName.select);\n        this._checkCanBonus();\n        if (this._canBonus == false) {\n            Msg.Show(\"今日已签到,请明日再来!\");\n            return;\n        }\n        // Msg.Show(\"暂时没有视频广告\");\n        // audioManager.pauseBgGame()\n        ad.video_show().then(isok=>{\n            // audioManager.playBgGame()\n            this.BackBtn.active = true\n\n            if(isok){\n              \n                data.updateCache(\"Base\",\"isGetDailyReward\",1);//是否已领签到奖励            \n                let loginDays=Number(data.getCache(\"Base\",\"loginDays\"));\n                if (loginDays >= 7){\n                    loginDays = 0\n                }\n                loginDays = loginDays+1\n                data.updateCache(\"Base\",\"loginDays\",loginDays);//登录天数  \n                \n                let addcoin = this.MoneyNum[loginDays - 1] *2\n                let coin=Number(data.getCache(\"Base\",\"coin\"))+ addcoin;\n                data.updateCache(\"Base\",\"coin\",coin);\n                Msg.Show(`恭喜获得${addcoin}金币`);\n                \n                this._updateSignBtn(loginDays);\n                this.scheduleOnce(() => {\n                    this._checkCanBonus();\n                    this._hideAllSignBtn();\n                }, 0);\n            }\n        });\n    }\n    /**\n     * 直接领取\n     */\n     OneceGet() {\n        // audioManager.playAudio(audioName.select);\n        this._checkCanBonus();\n        if (this._canBonus) {\n            this.BackBtn.active = true\n\n            data.updateCache(\"Base\",\"isGetDailyReward\",1);//是否已领签到奖励            \n            let loginDays=Number(data.getCache(\"Base\",\"loginDays\"));\n            if (loginDays >= 7){\n                loginDays = 0\n            }\n            loginDays = loginDays+1\n            data.updateCache(\"Base\",\"loginDays\",loginDays);//登录天数    \n            \n            let addcoin = this.MoneyNum[loginDays-1]\n            let coin=Number(data.getCache(\"Base\",\"coin\"))+ addcoin;\n            data.updateCache(\"Base\",\"coin\",coin);\n            Msg.Show(`恭喜获得${addcoin}金币`);\n            \n            this._updateSignBtn(loginDays);\n            this.scheduleOnce(() => {\n                this._checkCanBonus();\n                this._hideAllSignBtn();\n            }, 0);\n        }\n        else {\n            Msg.Show(\"今日已签到,请明日再来!\");\n        }\n    }\n\n    /**\n* 返回\n*/\n    onNewBackHomeClick: boolean = true;\n    Back() {\n        if (this.onNewBackHomeClick && UISign.native_have_show) {\n            this.onNewBackHomeClick = false\n            Export.click_native_YSAD(\"YSBN\") // 触发ysbn\n        } else { // 否则回到游戏\n            this.onNewBackHomeClick = true\n            UISign.native_have_show = false\n            Export.hide_naive_YSAD('YSBN') // 隐藏原生广告 传'YSBN'，意思是同时会预加载YSBN\n            // audioManager.playAudio(audioName.select);\n            this.close();\n        }\n    }\n\n    protected close() {\n        if (UISign.okbtn_callback) {\n            UISign.okbtn_callback()\n        }\n        cc.game.targetOff(this);\n        this.tweeNodeOut(this.node, () => {\n            this.node.destroy()\n        })\n    }\n\n    /**判断是否可以签到 */\n    private _checkCanBonus() {\n        var isReward = Number(data.getCache(\"Base\",\"isGetDailyReward\"))\n        cc.log(\"_checkCanBonus isReward:\",isReward)\n        if (isReward == 0) {\n            this._canBonus = true\n            return\n        }\n        this._canBonus = false\n    }\n    //更新领取情况\n    private _updatePanel() {\n        this._checkCanBonus();\n        if (this._canBonus == true) {\n            let loginDays=Number(data.getCache(\"Base\",\"loginDays\"));\n            console.log(loginDays + \"第几天\");\n            this._updateSignBtn(loginDays);\n        }\n    }\n    /**更新签到状态 */\n    private _updateSignBtn(day: number) {\n        //this._hideAllSignBtn();\n        for (let index = 0; index < 7; index++) {\n            if (index < day) {\n                this.EndSign[index].active = true;\n            } else if (index > day) {\n                this.EndSign[index].active = false;\n            }\n        }\n    }\n\n    /**刷新所有签到状态 */\n    private _hideAllSignBtn() {\n        let loginDays=Number(data.getCache(\"Base\",\"loginDays\"));\n        for (let index = 0; index < 7; index++) {\n            if (index == loginDays && this._canBonus) {\n                this.EndSign[index].active = false;\n            } else if (index == loginDays && !this._canBonus) {\n                this.EndSign[index].active = false;\n            } else if (index < loginDays) {\n                this.EndSign[index].active = true;\n            } else if (index > loginDays) {\n                this.EndSign[index].active = false;\n            }\n        }\n    }\n\n    protected onDestroy() {\n        cc.game.targetOff(this);\n    }\n\n\n    \n    static isShow:boolean = false\n    static okbtn_callback:Function  = null\n            \n    public static ShowPanel(callback: Function = null) {\n    {\n            if (UISign.isShow){\n                return\n            }\n            UISign.isShow = true\n            UISign.okbtn_callback = null\n            cc.loader.loadRes(\"prefabs/ui/signPanel\", cc.Prefab, (error:Error, resource:cc.Prefab) => {\n                UISign.isShow = false\n                UISign.okbtn_callback = callback\n                \n                if (error) {\n                    cc.error(error)\n                    return\n                }\n                if (resource) {\n                    let node: cc.Node = cc.instantiate(resource);\n                    if (node) {\n                        cc.find(\"Canvas\").addChild(node);\n                        node.active = true;\n                        node.position = cc.Vec3.ZERO;\n                    }\n                }\n            })\n        }\n    }\n}\n"]}