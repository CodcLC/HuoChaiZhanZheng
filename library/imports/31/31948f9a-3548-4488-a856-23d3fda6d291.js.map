{"version":3,"sources":["assets\\scripts\\game\\Events.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport { caijiTools } from \"../caijiTools\";\nimport { data } from \"../sdk/data\";\nimport arrow from \"./arrow\";\nimport cameraControl from \"./cameraControl\";\nimport damageLabel from \"./damageLabel\";\nimport damageTipPool from \"./damageTipPool\";\nimport { enemyAttribute } from \"./enemyBase\";\nimport GameManager from \"./GameManager\";\nimport spawnEnemy from \"./spawnEnemy\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Events extends cc.Component {\n\n    DropBloodProbability:number=0;\n    private static _instance: Events = null;\n    public static get instance() {\n        if (Events._instance == null) {\n            Events._instance = new Events;\n        }\n        return Events._instance;\n    }\n    init(){\n        Events.instance.DropBloodProbability=Number(data.gameJson(\"DropBloodProbability\"));\n    }\n    /**\n     * 生成怪物降临效果\n     */\n    async createSpawnEnemyEffect(enemyName:string,parent:cc.Node,position:cc.Vec2){\n        let prefab=await caijiTools.loadPrefab(\"prefabs/spawnEnemy\");\n        let effect=caijiTools.createNode(prefab,parent);\n        effect.setPosition(position);\n        effect.getComponent(spawnEnemy).spawnEnemyName=enemyName;\n        effect.active=true;\n    }\n    /**\n     * 生成怪物\n     */\n     async spawnEnemy(enemyName:string,parent:cc.Node,position:cc.Vec2){\n        let prefab=await caijiTools.loadPrefab(\"prefabs/enemys/\"+enemyName);\n        if(prefab){\n            let enemy=caijiTools.createNode(prefab,parent);\n            enemy.setPosition(position);\n            enemy.setSiblingIndex(GameManager.instance.player.getSiblingIndex());\n            enemy.active=true;\n        }\n    }\n    /**\n     * 掉落金币\n     */\n    async dropCoin(target:cc.Node,position:cc.Vec2) {\n        let dropNum=Number(data.gameJson(\"enemyData\",target.name,enemyAttribute.dropCoinNumber));\n        let coin=await caijiTools.loadPrefab(\"prefabs/coin_drop\");\n        for(let i=0;i<dropNum;i++){\n            let newCoin=caijiTools.createNode(coin,target.parent);\n            newCoin.setPosition(position);\n            newCoin.setSiblingIndex(target.getSiblingIndex()+1);\n            newCoin.active=true;\n        }\n    }\n    /**\n     * 掉落血瓶\n     */\n    async dropBloodBottle(target:cc.Node,position:cc.Vec2){\n        let random=caijiTools.random_int(0,100)/100;\n        if(random>Events.instance.DropBloodProbability) return;\n        let coin=await caijiTools.loadPrefab(\"prefabs/dropBloodBottle\");\n        let bloodBottle=caijiTools.createNode(coin,target.parent);\n        bloodBottle.setParent(target.parent);\n        bloodBottle.setPosition(position);\n        bloodBottle.setSiblingIndex(GameManager.instance.player.getSiblingIndex()+1);\n        bloodBottle.active=true;\n    }\n    /**\n     * 玩家增加血量效果\n     * @param player \n     * @param addNum \n     * @param offsetX \n     * @param isRevive \n     */\n    async showAddHp_player(player: cc.Node, addNum: number, offsetX: number, isRevive: boolean = false) {\n        if (isRevive) {\n            this.createAddHpEffect_revive();\n        } else {\n            this.createAddHpEffect_normal();\n        }\n        let Label = await damageTipPool.instance.getDamageLabel();\n        Label.setParent(GameManager.instance.node);\n        Label.setPosition(player.x + offsetX, player.y + 80);\n        Label.getComponent(damageLabel).damage = addNum;\n        Label.getComponent(damageLabel).color = cc.Color.GREEN;\n        Label.active = true;\n    }\n    /**\n     * 显示玩家受伤字体\n     * @param player \n     * @param damge \n     * @param offsetX \n     */\n    async showDamageLabel_player(player: cc.Node, damge: number, offsetX: number) {\n        let Label = await damageTipPool.instance.getDamageLabel();\n        Label.setParent(GameManager.instance.node);\n        Label.setPosition(player.x + offsetX, player.y + 130);\n        Label.getComponent(damageLabel).damage = Math.floor(damge);\n        Label.getComponent(damageLabel).color = cc.Color.RED;;\n        Label.active = true;\n    }\n    /**\n     * 显示怪物受伤字体\n     * @param enemy \n     * @param damge \n     * @param position \n     */\n    async showDamageLabel_enemy(enemy: cc.Node, damge: number, position: cc.Vec2) {\n        this.showDamageEffect(enemy, position);\n        let Label = await damageTipPool.instance.getDamageLabel();\n        Label.setParent(GameManager.instance.node);\n        Label.setPosition(position.x, position.y + 60);\n        Label.getComponent(damageLabel).damage = Math.floor(damge);\n        Label.getComponent(damageLabel).color = cc.Color.WHITE;;\n        Label.active = true;\n    }\n    /**\n     * 玩家攻击效果\n     * @param enemy \n     * @param position \n     */\n    async showDamageEffect(enemy: cc.Node, position: cc.Vec2) {\n        let effect = await damageTipPool.instance.getDamageEffect();\n        effect.setParent(GameManager.instance.node.parent);\n        effect.setPosition(position);\n        effect.active = true;\n    }\n    /**\n     * 怪物死亡效果\n     * @param enemy 怪物\n     * @param effectName 效果预制体名字\n     * @param position 坐标\n     * @returns \n     */\n    async createEnemyDieEffect(enemy: cc.Node, effectName: string, position) {\n        Events.instance.dropCoin(enemy,position);\n        Events.instance.dropBloodBottle(enemy,position);\n        if (effectName == \"\") return;\n        let pre = await caijiTools.loadPrefab(\"prefabs/\" + effectName);\n        let effect = caijiTools.createNode(pre, enemy.parent, false);\n        effect.setPosition(position);\n        effect.setSiblingIndex(enemy.getSiblingIndex());\n        effect.active = true;\n    }\n    /**\n     * 显示复活时回血效果\n     */\n    async createAddHpEffect_revive() {\n        let prefab = await caijiTools.loadPrefab(\"prefabs/heal\");\n        let effect = caijiTools.createNode(prefab, GameManager.instance.player);\n        effect.setPosition(0, -30);\n        effect.active = true;\n        this.scheduleOnce(() => {\n            if(effect.isValid==false) return;\n            effect.destroy();\n        }, 2);\n    }\n    /**\n    * 显示普通回血效果\n    */\n    async createAddHpEffect_normal() {\n        let prefab = await caijiTools.loadPrefab(\"prefabs/addHpEffect\");\n        let effect = caijiTools.createNode(prefab, GameManager.instance.player);\n        effect.setPosition(0, -30);\n        effect.active = true;\n        this.scheduleOnce(() => {\n            if(effect.isValid==false) return;\n            effect.destroy();\n        }, 2);\n    }\n    /**\n     * 怪物打击玩家效果\n     * @param parent \n     * @param position \n     * @param scaleX \n     */\n    async showEnemyHitEffect(parent: cc.Node, position: cc.Vec2, scaleX: number) {\n        let random = caijiTools.random_int(1, 2);\n        let prefab = await caijiTools.loadPrefab(\"prefabs/enemyHitEffect\" + random);\n        let effect = caijiTools.createNode(prefab, GameManager.instance.player);\n        effect.setParent(parent);\n        effect.setPosition(position);\n        effect.scaleX = scaleX;\n        effect.active = true;\n        this.scheduleOnce(() => {\n            if(effect.isValid==false) return;\n            effect.destroy();\n        }, 1);\n    }\n    /**\n     * 生成箭（怪物）\n     * @param enemy \n     * @param spawnPosition \n     * @param playerPosition \n     * @param angle \n     * @param damge \n     */\n    async createArrow(enemy: cc.Node, spawnPosition: cc.Vec2, playerPosition: cc.Vec2, angle: number, damge: number) {\n        let prefab = await caijiTools.loadPrefab(\"prefabs/arrow\");\n        let node = caijiTools.createNode(prefab, enemy.parent);\n        node.getComponent(arrow).damage = damge;\n        node.getComponent(arrow).enemy = enemy;\n        node.getComponent(arrow).playerPosition = playerPosition;\n        node.setSiblingIndex(enemy.getSiblingIndex());\n        node.setPosition(spawnPosition);\n        node.angle = angle;\n        node.active = true;\n    }\n    screenShake( repeat: number = 10, offsetX: number = 0, offsetY: number = 20){\n        cc.Tween.stopAllByTarget(cameraControl.instance.cameraNode);\n        cameraControl.instance.node.y=0;\n        caijiTools.screenShake(cameraControl.instance.cameraNode,repeat,offsetX,offsetY);\n    }\n    async showReviveFx(target:cc.Node){\n        let pre=await caijiTools.loadPrefab(\"prefabs/fx_revive\");\n        let fx=cc.instantiate(pre);\n        fx.setParent(target.parent);\n        fx.setSiblingIndex(target.getSiblingIndex()+1);\n        fx.setPosition(target.x,target.y-20);\n        fx.active=true;\n    }\n}\n"]}